% \iffalse
%<*driver>
\ProvidesFile{\jobname.dtx}[2020/07/11 v0.3.2-dev An Unofficial Thesis Template for ShanghaiTech University]
\documentclass{ltxdoc}
\usepackage{\jobname-doc}

\EnableCrossrefs
\CodelineIndex
\RecordChanges

\begin{document}
  \DocInput{\jobname.dtx}
\end{document}
%</driver>
% \fi
%
% ^^A DoNotIndex list from thuthesis
% ^^A https://github.com/tuna/thuthesis/blob/17acabe/thuthesis.dtx#L33-L52
% \DoNotIndex{\newenvironment,\@bsphack,\@empty,\@esphack,\sfcode}
% \DoNotIndex{\addtocounter,\label,\let,\linewidth,\newcounter}
% \DoNotIndex{\noindent,\normalfont,\par,\parskip,\phantomsection}
% \DoNotIndex{\providecommand,\ProvidesPackage,\refstepcounter}
% \DoNotIndex{\RequirePackage,\setcounter,\setlength,\string,\strut}
% \DoNotIndex{\textbackslash,\texttt,\ttfamily,\usepackage}
% \DoNotIndex{\begin,\end,\begingroup,\endgroup,\par,\\}
% \DoNotIndex{\if,\ifx,\ifdim,\ifnum,\ifcase,\else,\or,\fi}
% \DoNotIndex{\let,\def,\xdef,\edef,\newcommand,\renewcommand}
% \DoNotIndex{\expandafter,\csname,\endcsname,\relax,\protect}
% \DoNotIndex{\Huge,\huge,\LARGE,\Large,\large,\normalsize}
% \DoNotIndex{\small,\footnotesize,\scriptsize,\tiny}
% \DoNotIndex{\normalfont,\bfseries,\slshape,\sffamily,\interlinepenalty}
% \DoNotIndex{\textbf,\textit,\textsf,\textsc,\textup}
% \DoNotIndex{\hfil,\par,\hskip,\vskip,\vspace,\quad}
% \DoNotIndex{\centering,\raggedright,\ref}
% \DoNotIndex{\c@secnumdepth,\@startsection,\@setfontsize}
% \DoNotIndex{\ ,\@plus,\@minus,\p@,\z@,\@m,\@M,\@ne,\m@ne}
% \DoNotIndex{\@@par,\DeclareOperation,\RequirePackage,\LoadClass}
% \DoNotIndex{\AtBeginDocument,\AtEndDocument}
% \DoNotIndex{\NeedsTeXFormat,\ProvidesClass}
%
% \GetFileInfo{\jobname.dtx}
%
% \title{\ShtThesis{} \fileversion{} ç”¨æˆ·æŒ‡å—}
% \author{ææ¶¦ä¸œ\thanks{\href{mailto:rundong.001@gmail.com}{rundong.001@gmail.com}}}
%
% \changes{v0.3.2-dev}{2020/07/12}{ä½¿ç”¨ \textsf{Doc} å’Œ \textsf{DocStrip} é‡æ„é¡¹ç›®}
%
% \maketitle
% 
% \begin{abstract}
% \shtthesis{} (\textbf{S}hang\textbf{h}ai\textbf{T}ech University \textbf{THESIS}) æ˜¯æ ¹æ®ã€Šä¸Šæµ·ç§‘æŠ€å¤§å­¦ç ”ç©¶ç”Ÿå­¦ä½è®ºæ–‡æ’°å†™è§„èŒƒï¼ˆåˆç¨¿ï¼‰ã€‹å’Œã€Šä¸Šæµ·ç§‘æŠ€å¤§å­¦æœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰å·¥ä½œæ¡ä¾‹ï¼ˆè¯•è¡Œï¼‰ã€‹ï¼ˆä¸‹æ–‡ç»Ÿä¸€ç®€ç§°ã€Šè§„èŒƒã€‹ï¼‰ç¼–å†™çš„ã€é€‚ç”¨äºä¸Šæµ·ç§‘æŠ€å¤§å­¦å­¦ä½è®ºæ–‡å†™ä½œçš„\emph{éå®˜æ–¹} \LaTeX æ¨¡æ¿ã€‚ç›®å‰ç‰ˆæœ¬ï¼ˆ\fileversion{}ï¼‰æä¾›äº†æœ¬ç§‘ã€ç¡•å£«å’Œåšå£«å­¦ä½è®ºæ–‡æ’ç‰ˆé€‰é¡¹ï¼Œä¸”èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆç”¨äºç›²å®¡çš„åŒ¿åç‰ˆä»¥åŠæœ€ç»ˆæäº¤çš„æ‰“å°ç‰ˆè®ºæ–‡ã€‚é¡¹ç›®ä¸»é¡µï¼š\url{https://github.com/lirundong/shtthesis}
% \end{abstract}
%
% \vskip\parskip
%
% \def\abstractname{æ’ç‰ˆæ ·å¼è¯´æ˜}
% \begin{abstract}
% æœ¬æ–‡æ¡£é’ˆå¯¹å„éƒ¨åˆ†ä¸åŒå†…å®¹ä½¿ç”¨ä¸åŒçš„æ’ç‰ˆæ ·å¼ï¼šæ–‡æ¡£æ­£æ–‡ä½¿ç”¨å®‹ä½“å’Œè‹±æ–‡è¡¬çº¿ä½“ï¼ˆserifï¼‰ï¼Œ\emph{å¼ºè°ƒéƒ¨åˆ†}ä½¿ç”¨\emph{æ¥·ä½“}å’Œè‹±æ–‡æ„å¤§åˆ©ä½“ï¼ˆ\emph{italic}ï¼‰ï¼Œå®åŒ…åç§°ä½¿ç”¨è‹±æ–‡æ— è¡¬çº¿ä½“ï¼ˆ\textsf{sans serif}ï¼Œä¾‹å¦‚ \textsf{hyperref}ï¼‰ï¼Œä»£ç åŠé€‰é¡¹ä½¿ç”¨è‹±æ–‡ç­‰å®½ä½“ï¼ˆ\texttt{typewriter}ï¼‰å’Œ\texttt{ç­‰å®½ç»†é»‘ä½“}æ’ç‰ˆã€‚
%
% æ–‡ä¸­ä»¥ |$| å¼€å¤´çš„ä»£ç å—è¡¨ç¤ºç»ˆç«¯å‘½ä»¤ï¼Œä¾‹å¦‚
% \begin{shell}
% `\prompt' latexmk shtthesis.tex
% \end{shell}
% ä½¿ç”¨æ—¶ä¸å¿…è¾“å…¥ |$| å­—ç¬¦ã€‚å…¶ä»–ä»£ç å—è¡¨ç¤º \LaTeX{} å‘½ä»¤ï¼Œä¾‹å¦‚
% \begin{latex}
% \foo`\oarg{argi}\marg{argii}'
% \end{latex}
% å…¶ä¸­ï¼Œç”± |[]| åŒ…è£¹çš„ä¸ºå‘½ä»¤çš„\emph{å¯é€‰å‚æ•°}ï¼Œç”± |{}| åŒ…è£¹çš„ä¸ºå‘½ä»¤çš„\emph{å¿…é€‰å‚æ•°}ï¼Œç”± |<>| åŒ…è£¹çš„ä¸º\emph{å‚æ•°åç§°}ï¼Œè°ƒç”¨æ—¶ä¸å¿…è¾“å…¥å‚æ•°å‰åçš„å°–æ‹¬å·|<>|ã€‚ä¾‹å¦‚
% \begin{latex}
% \foo[bar]{baz}
% \end{latex}
% \end{abstract}
%
% \vskip\parskip
%
% \def\abstractname{æ³¨æ„}
% \begin{abstract}
% \noindent
% \begin{enumerate}
% \item æœ¬æ–‡æ¡£æ’ç‰ˆæ•ˆæœä¸ \shtthesis{} æ–‡æ¡£ç±»æ’ç‰ˆæ•ˆæœæ— å…³ï¼›
% \item æœ¬æ–‡æ¡£å¹¶é \LaTeX{} å…¥é—¨æ•™ç¨‹ã€‚è‹¥æ‚¨å°šä¸ç†Ÿæ‚‰ \LaTeX{}ï¼Œæ¨èæ‚¨é˜…è¯» \textsf{lshort}~\cite{oetiker2018not} å’Œå®ƒçš„ä¸­æ–‡ç¿»è¯‘ç‰ˆ \textsf{lshort-zh-cn}~\cite{ctex2020not}ï¼Œæˆ–æ˜¯\citeauthor{liu2013latex}ç¼–è‘—çš„ã€Š\LaTeX{} å…¥é—¨ã€‹~\cite{liu2013latex}ï¼›
% \item \shtthesis{} å°šæœªè¿›å…¥ç¨³å®šç‰ˆä¸”ä»åœ¨å¿«é€Ÿè¿­ä»£ä¸­ï¼Œæ¯æ¬¡å‰¯ç‰ˆæœ¬å·å‡çº§ï¼ˆ$\symup{v}0.x.y \to \symup{v}0.x+1.z$ï¼‰ä¸ä¿è¯å‰å‘å…¼å®¹ã€‚è‹¥æ‚¨å·²å¼€å§‹å†™ä½œï¼Œå‡çº§ç‰ˆæœ¬éœ€éå¸¸è°¨æ…ï¼›
% \item \shtthesis{} é¡¹ç›®ä½¿ç”¨ \href{https://www.gnu.org/licenses/gpl-3.0.html}{GNU General Public License v3} åˆ†å‘ï¼›
% \end{enumerate}
% \end{abstract}
%
% \clearpage
% \begin{multicols}{2}[
%   \setlength{\columnseprule}{.4pt}
%   \setlength{\columnsep}{18pt}]
%   \tableofcontents
% \end{multicols}
%
% \clearpage
% \section{æ¨¡æ¿å®‰è£…}
% \shtthesis{} å·²å‘å¸ƒè‡³ \href{https://www.ctan.org/pkg/shtthesis}{CTAN} ä¸”è¢«æ”¶å½•äº \TeX{} Liveï¼Œæ¨èä½¿ç”¨ \TeX{} Live åŒ…ç®¡ç†å™¨ |tlmgr| ç›´æ¥å®‰è£…ï¼š
% \begin{shell}
% `\prompt' tlmgr install shtthesis
% \end{shell}
% è‹¥å½“å‰å‘è¡Œç‰ˆå·²åŒ…å« \shtthesis{}ï¼Œå»ºè®®åœ¨ä½¿ç”¨å‰æ›´æ–°ï¼š
% \begin{shell}
% `\prompt' tlmgr update shtthesis
% \end{shell}
% 
% ä¸ºé¿å…ç‰ˆæƒé—®é¢˜ï¼Œä¸Šä¼ è‡³ CTAN çš„ \shtthesis{} å¹¶ä¸åŒ…å«æ ¡å¾½æ–‡ä»¶ï¼Œéœ€è¦è‡³é¡¹ç›®ä¸»é¡µä¸‹è½½ \href{https://github.com/lirundong/shtthesis/raw/master/shanghaitech-emblem.pdf}{shanghaitech-emblem.pdf}ã€‚è‹¥ç”¨æˆ·è®ºæ–‡æ–‡æ¡£ä¸º thesis.texï¼Œå‚è€ƒæ–‡çŒ®æ•°æ®åº“ä¸º reference.bibï¼Œåˆ™éœ€å°†ä¸‹è½½çš„æ ¡å¾½æ–‡ä»¶ä¸å®ƒä»¬æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œä¸‹æ–‡ç§°ä¸º\emph{å·¥ä½œç›®å½•}ã€‚å·¥ä½œç›®å½•ä¸­å¿…è¦çš„æ–‡ä»¶åŒ…æ‹¬ï¼š
% \begin{center}
%   \begin{tabular}{ll}
%     \toprule
%     æ–‡ä»¶åç§° & è¯´æ˜ \\
%     \midrule 
%     thesis.tex & è®ºæ–‡æ–‡æ¡£ \\
%     reference.bib & å‚è€ƒæ–‡çŒ®æ•°æ®åº“ \\
%     shanghaitech-emblem.pdf & ä¸Šæµ·ç§‘æŠ€å¤§å­¦æ ¡å¾½ \\
%     \bottomrule
%   \end{tabular}
% \end{center}
% 
% \subsection{æ–‡æ¡£ç¼–è¯‘}
% \shtthesis{} æ”¯æŒä½¿ç”¨ \hologo{XeTeX} å’Œ \hologo{LuaTeX} å¼•æ“ç¼–è¯‘ï¼ˆæ³¨æ„ï¼Œ\emph{ä¸æ”¯æŒ} \hologo{pdfTeX}ï¼‰ã€‚æ¨èåœ¨æœ€æ–°çš„ \hologo{TeX} Live ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ |latexmk| å·¥å…·è¿›è¡Œç¼–è¯‘ã€‚Windows åŠ Linux ç”¨æˆ·è¯·ä¸‹è½½å®‰è£… \href{https://www.tug.org/texlive/}{\hologo{TeX} Live}ï¼ŒmacOS ç”¨æˆ·è¯·ä¸‹è½½å®‰è£… \href{https://www.tug.org/mactex/}{Mac\hologo{TeX}}ã€‚\emph{éå¸¸ä¸æ¨è}ä½¿ç”¨ $\mathbb{C}$\TeX å‘è¡Œç‰ˆï¼ˆ\emph{å¤§äººï¼Œæ—¶ä»£å˜äº†}ï¼‰ã€‚
% 
% åœ¨å®Œæˆç¯å¢ƒé…ç½®åï¼Œå³å¯ä½¿ç”¨ |latexmk| å·¥å…·å®Œæˆç¼–è¯‘ã€‚æ‰“å¼€ç»ˆç«¯ï¼ˆWindows ç”¨æˆ·æ‰“å¼€ CMDï¼‰åˆ‡æ¢è‡³å·¥ä½œç›®å½•ï¼Œä½¿ç”¨ \hologo{XeTeX} å¼•æ“è¿›è¡Œç¼–è¯‘ï¼š
% \begin{shell}
% `\prompt' latexmk -pdfxe
% \end{shell}
% è‹¥åå¥½ä½¿ç”¨ \hologo{LuaTeX} å¼•æ“ï¼Œåˆ™ç¼–è¯‘å‘½ä»¤ä¸ºï¼š
% \begin{shell}
% `\prompt' latexmk -pdflua
% \end{shell}
% 
% ä¸€èˆ¬æ¥è¯´ï¼Œ\hologo{XeTeX} å¼•æ“çš„ç¼–è¯‘é€Ÿåº¦è¾ƒå¿«ä¸”å ç”¨èµ„æºè¾ƒå°‘ï¼Œè€Œ \hologo{LuaTeX} å¼•æ“çš„ç¼–è¯‘ç»“æœä¼¼ä¹æœ‰æ›´å¥½çš„è·¨å¹³å°è§„èŒƒæ€§ã€‚
%
% \section{æ¨¡æ¿è®¾å®š}
% \subsection{è½½å…¥\shtthesis æ¨¡æ¿ç±»}
% æ¨¡æ¿å®‰è£…å®Œæˆåï¼Œåœ¨è®ºæ–‡æ–‡ä»¶ thesis.tex å¼€å¤´ä½¿ç”¨
% \begin{latex}
% \documentclass`\oarg{ç±»å‚æ•°}'{shtthesis}
% \end{latex}
% å³å¯è½½å…¥æ¨¡æ¿ã€‚\meta{ç±»å‚æ•°}åŒ…æ‹¬ï¼šç”¨äºæŒ‡å®šå­¦ä½ç±»å‹çš„ |bachelor|ã€ |master|ã€ |doctor| é€‰é¡¹ï¼Œç”¨äºç”Ÿæˆç›²å®¡è®ºæ–‡çš„ |anonymous| é€‰é¡¹ï¼Œç”¨äºç”Ÿæˆæ‰“å°ç‰ˆè®ºæ–‡çš„ |print| é€‰é¡¹ï¼Œä»¥åŠä¼ é€’ç»™ \textsf{cexbook} çš„å…¶ä»–é€‰é¡¹ã€‚
% 
% \subsubsection{æŒ‡å®šå­¦ä½ç±»å‹}
% \DescribeMacro{bechelor}
% \DescribeMacro{master}
% \DescribeMacro{doctor}
% \shtthesis{} \fileversion{} æ¥å—çš„å­¦ä½ç±»å‹åŒ…æ‹¬å­¦å£«ï¼ˆbachelorï¼‰ã€ç¡•å£«ï¼ˆmasterï¼‰å’Œåšå£«ï¼ˆdoctorï¼‰ï¼Œå­¦ä½ç±»å‹å¿…é¡»æŒ‡å®šä¸”ä¸èƒ½åŒæ—¶æŒ‡å®šå¤šç§å­¦ä½ã€‚æŒ‡å®šå­¦ä½ç±»å‹åï¼Œ\shtthesis{} ä¼šæŒ‰ç…§ç›¸åº”æ’ç‰ˆè§„åˆ™ï¼Œç”Ÿæˆä¸åŒçš„å°é¢å’Œæ­£æ–‡æ ¼å¼ã€‚
% 
% éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•™åŠ¡å¤„ç»™å‡ºçš„æœ¬ç§‘ç”Ÿè®ºæ–‡æ’ç‰ˆè§„èŒƒ~\citep{bachelor2019} ä¸­åŒ…å«ä¸€äº›éå¸¸è´¹è§£å’Œä¸ä¸€è‡´çš„å†…å®¹ã€‚è€ƒè™‘åˆ° 2020 å¹´å­¦ä½ç”³è¯·æ—¶ï¼Œæœ¬ç§‘ç”Ÿæ”¶åˆ°è¿‡ä¸‹è¿°é€šçŸ¥ï¼š
% \begin{quotation}
% â€œå¦‚æœæ˜¯ä½¿ç”¨Latexç‰ˆæ¨¡æ¿ï¼Œä¿è¯å°é¢ä¸å­¦æ ¡çš„wordç‰ˆè¦æ±‚å®Œå…¨ä¸€è‡´ï¼Œæ­£æ–‡ä¸­çš„æ ¼å¼ä¸è¦æ±‚åœ¨å­—å·ç­‰ç»†èŠ‚æ–¹é¢ä¸Wordç‰ˆè¦æ±‚ä¸¥æ ¼ä¸€è‡´ï¼Œä½†è¦åšåˆ°è‡ªå·±çš„è®ºæ–‡è‡ªç»Ÿä¸€å¹¶ä¸”ç¬¦åˆå¸¸ç”¨è§„èŒƒã€‚â€
% \end{quotation}
% \DescribeMacro{comfort}
% å› æ­¤ \shtthesis{} ä¸ºæœ¬ç§‘ç”Ÿè®ºæ–‡é¢å¤–æä¾›äº† |comfort| é€‰é¡¹ï¼Œåœ¨ä¿è¯å°é¢ç¬¦åˆè§„èŒƒçš„åŒæ—¶ä½¿è®ºæ–‡æ’ç‰ˆæ›´ä¸ºèˆ’é€‚ä¸”æ­£å¼ã€‚æ¨èæ’ç‰ˆæœ¬ç§‘è®ºæ–‡æ—¶ä½¿ç”¨ï¼š
% \begin{latex}
% \documentclass[bachelor, comfort]{shtthesis}
% \end{latex}
% 
% \subsubsection{\texttt{anonymous} é€‰é¡¹} \label{sec::option_anonymous}
% \DescribeMacro{anonymous}
% ä¸ºæ–¹ä¾¿ç”Ÿæˆç ”ç©¶ç”Ÿè®ºæ–‡ç›²å®¡æ—¶æ‰€éœ€çš„åŒ¿åç‰ˆè®ºæ–‡ï¼Œä¼ å…¥ |anonymous| ç±»å‚æ•°å³å¯å°†è®ºæ–‡ä¸­è‹±æ–‡å°é¢çš„ä½œè€…ä¿¡æ¯ã€å¯¼å¸ˆä¿¡æ¯ï¼Œä»¥åŠé™„å½•ä¸­çš„ä½œè€…ç®€å†æ›¿æ¢ä¸ºåŒ¿åå­—ç¬¦ä¸²ï¼Œå°†ä½œè€…è®ºæ–‡å‘è¡¨ã€ä¸“åˆ©ç”³è¯·è®°å½•æ›¿æ¢ä¸ºåŒ¿åç‰ˆæœ¬ï¼Œå¹¶éšå»æ–‡æœ«çš„è‡´è°¢éƒ¨åˆ†ï¼š
% \begin{latex}
% \documentclass[anonymous]{shtthesis}
% \end{latex}
%
% \DescribeMacro{anonymous-str}
% \shtthesis{} é»˜è®¤çš„åŒ¿åå­—ç¬¦ä¸²ä¸ºè¿ç»­çš„ä¸‰ä¸ªè‹±æ–‡æ˜Ÿå·â€œ***â€ï¼Œè¯¥å­—ç¬¦ä¸²å¯ä½¿é€šè¿‡ |\shtsetup| çš„ |anonymous-str| é€‰é¡¹ä¿®æ”¹ï¼š
% \begin{latex}
% \shtsetup{
%   anonymous-str = XXX, % ä½œè€…ã€å¯¼å¸ˆå§“ååœ¨åŒ¿åç¯å¢ƒä¸‹æ˜¾ç¤ºä¸º XXX
% }
% \end{latex}
% |\shtsetup| å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•è¯¦è§ç¬¬~\ref{sec::setup_info} èŠ‚ã€‚
% 
% \subsubsection{\texttt{print} é€‰é¡¹}
% \DescribeMacro{print}
% ä¼ å…¥ |print| é€‰é¡¹åï¼Œè®ºæ–‡ä¸­æ‰€æœ‰è¶…é“¾æ¥å˜ä¸ºé»‘è‰²ï¼ˆåŒ…æ‹¬æ–‡çŒ®å¼•ç”¨ã€URL ç­‰ï¼‰ï¼Œä»¥é¿å…é»‘ç™½æ‰“å°åå½©è‰²é“¾æ¥å†…å®¹å‘ˆæµ…ç°è‰²å½±å“è§‚æ„Ÿï¼›åŒæ—¶å°†å¥‡æ•°é¡µã€å¶æ•°é¡µçš„å†…ä¾§é¡µè¾¹è·åˆ†åˆ«å¢åŠ  0.63 å˜ç±³ä»¥ä¾¿äºè£…è®¢ã€‚
% \begin{latex}
% \documentclass[print]{shtthesis}
% \end{latex}
% 
% \subsubsection{ä¼ é€’ç»™ \textsf{ctexbook} çš„å…¶ä»–é€‰é¡¹}
% \shtthesis{} å®é™…ä½¿ç”¨ \CTeX å®åŒ…æä¾›çš„ \textsf{ctexbook} æ–‡æ¡£ç±»æ’ç‰ˆï¼Œé™¤ä¸Šè¿°é€‰é¡¹å¤–çš„ç±»å‚æ•°ä¼šä¼ é€’ç»™ \textsf{ctexbook}ã€‚å…¶ä¸­éœ€è¦æ³¨æ„çš„é€‰é¡¹ä¸º |fontset|ï¼Œå³è®¾å®šè®ºæ–‡æ‰€ç”¨çš„å­—ä½“é›†ã€‚\CTeX å®åŒ…è‡ªèº«èƒ½å¤Ÿæ ¹æ®ç¼–è¯‘å¹³å°é€‰æ‹©åˆé€‚çš„å­—ä½“é›†ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®ç›¸åº”çš„ fontsetï¼Œä¾‹å¦‚åœ¨ Windows å¹³å°ä¸‹è®¾ç½® |fontset=windows|ï¼Œåœ¨ macOS å¹³å°ä¸‹è®¾ç½® |fontset=mac|ï¼š
% \DescribeMacro{fontset}
% \begin{latex}
% \documentclass[fontset=windows]{shtthesis}
% \end{latex}
% ä¸åŒå­—ä½“é›†æ‰€ç”¨å­—ä½“è§è¡¨~\ref{tab::fonts}ã€‚åœ¨ Linux/UNIX ç¯å¢ƒä¸‹å¯¹äºå®‹ä½“å’Œé»‘ä½“ï¼Œä¼šé¦–å…ˆæ£€æµ‹æ€æºå®‹ä½“/é»‘ä½“ï¼ˆSource Han å­—ä½“æˆ– Noto CJK å­—ä½“ï¼‰æ˜¯å¦å®‰è£…ï¼Œè‹¥æœªæ£€æµ‹åˆ°åˆ™å›é€€è‡³ Fandol å®‹ä½“/é»‘ä½“ï¼›å¯¹äºæ¥·ä½“å’Œä»¿å®‹ï¼Œåˆ™ä¼šä¾æ¬¡æ£€æµ‹æ–¹æ­£æ¥·ä½“/ä»¿å®‹-GBK æ˜¯å¦å®‰è£…ï¼Œè‹¥æœªæ£€æµ‹åˆ°åˆ™é€€å›è‡³ Fandol æ¥·ä½“/ä»¿å®‹ã€‚
% 
% \begin{table}[htb]
%   \centering
%   \caption{ä¸åŒå­—ç¬¦é›†ä¸‹ \shtthesis{} æ‰€ç”¨å­—ä½“}
%   \label{tab::fonts}
%   \begin{subtable}{\columnwidth}
%     \centering
%     \caption{\shtthesis{} æ‰€ç”¨ä¸­æ–‡å­—ä½“}
%     \label{tab::chs_fonts}
%     \begin{tabular}{*{3}{c}}
%       \toprule
%       Windows & macOS & Linux/UNIX \\
%       \midrule
%       \songti   ä¸­æ˜“å®‹ä½“ & \songti   åæ–‡å®‹ä½“ç®€ä½“ & \songti   æ€æºå®‹ä½“ $\to$ Fandol å®‹ä½“ \\
%       \heiti    ä¸­æ˜“é»‘ä½“ & \heiti    åæ–‡é»‘ä½“ç®€ä½“ & \heiti    æ€æºé»‘ä½“ $\to$ Fandol é»‘ä½“ \\
%       \kaishu   ä¸­æ˜“æ¥·ä½“ & \kaishu   åæ–‡æ¥·ä½“ç®€ä½“ & \kaishu   æ–¹æ­£æ¥·ä½“-GBK $\to$ Fandol æ¥·ä½“ \\
%       \fangsong ä¸­æ˜“ä»¿å®‹ & \fangsong åæ–‡ä»¿å®‹ç®€ä½“ & \fangsong æ–¹æ­£ä»¿å®‹-GBK $\to$ Fandol ä»¿å®‹ \\
%       \bottomrule
%     \end{tabular}
%   \end{subtable}
%   \newline
%   \vspace{12pt}
%   \newline
%   \begin{subtable}{\columnwidth}
%     \centering
%     \caption{\shtthesis{} æ‰€ç”¨è‹±æ–‡å­—ä½“ï¼ˆå…¨å¹³å°ä¸€è‡´ï¼‰}
%     \label{tab::eng_fonts}
%     \begin{tabular}{*{3}{c}}
%       \toprule
%       \textrm{Serif} & \textsf{Sans Serif} & \texttt{Typewriter} \\
%       \midrule
%       \textrm{\TeX{} Gyre Termes} & \textsf{\TeX{} Gyre Heros} & \texttt{\TeX{} Gyre Cursor} \\
%       \bottomrule
%     \end{tabular}
%   \end{subtable}
% \end{table}
% 
% éœ€è¦æ³¨æ„ Fandol ç³»åˆ—å­—ä½“è™½ç„¶ä¸º \TeX{} Live è‡ªå¸¦ï¼Œä½†å…¶å­—ç¬¦è¦†ç›–æœ‰é™ï¼Œå¯¹äºç”Ÿåƒ»å­—å¯èƒ½å‡ºç°ç¼ºå­—æƒ…å†µã€‚æ€æºå®‹ä½“\footnote{\url{https://source.typekit.com/source-han-serif/cn/}}ã€æ€æºé»‘ä½“\footnote{\url{https://github.com/adobe-fonts/source-han-sans}}ã€æ–¹æ­£æ¥·ä½“-GBK\footnote{\url{https://www.foundertype.com/index.php/FontInfo/index/id/137}}å’Œæ–¹æ­£ä»¿å®‹-GBK\footnote{\url{https://www.foundertype.com/index.php/FontInfo/index/id/128}} å‡ä¸ºå…è´¹å­—ä½“ä¸”å®Œæ•´è¦†ç›–ç®€ç¹æ‰©å±• (GBK) å­—ç¬¦é›†ï¼Œéå¸¸æ¨è Linux/UNIX ç”¨æˆ·å®‰è£…ä½¿ç”¨ã€‚
% 
% \subsection{è®¾å®šè®ºæ–‡å¿…è¦ä¿¡æ¯} \label{sec::setup_info}
% \DescribeMacro{\shtsetup}
% çŸ¥æ™“å­¦ä½ç±»å‹åï¼Œ\shtthesis{} è¿˜éœ€å­¦ä½åç§°ã€ä¸“ä¸šã€ä½œè€…åŠå¯¼å¸ˆä¿¡æ¯ç­‰å…¶ä»–ä¿¡æ¯æ‰èƒ½è¿›è¡Œè¿›ä¸€æ­¥æ’ç‰ˆã€‚ä»¥ä¸Šå‡å¯é€šè¿‡ |\shtsetup| å‘½ä»¤ï¼Œåœ¨è®ºæ–‡å¯¼è¨€åŒºï¼ˆå³ |\documentclass| ä¹‹åã€|\begin{document}| ä¹‹å‰ï¼‰ä»¥ key=value æ–¹å¼ç»Ÿä¸€è®¾å®šã€‚ç”¨æˆ·å¯ä»¥ä¸€æ¬¡æ€§è°ƒç”¨ |\shtsetup| è®¾å®šæ‰€æœ‰ä¿¡æ¯ï¼Œä¹Ÿå¯åˆ†å¤šæ¬¡è®¾å®šã€‚è¡¨ç¤ºä¸­æ–‡ä¿¡æ¯æ¡ç›®çš„ key ä¸º |-| è¿æ¥çš„å°å†™å•è¯ï¼ˆä¾‹å¦‚ç ”ç©¶ç”Ÿå­¦ä½ä¸­æ–‡åç§° |degree-name|ï¼‰ï¼Œç”± |*| ç»“å°¾çš„ key ä¸€èˆ¬è¡¨ç¤ºå¯¹åº”çš„è‹±æ–‡æ¡ç›®ï¼ˆä¾‹å¦‚ç ”ç©¶ç”Ÿå­¦ä½è‹±æ–‡åç§° |degree-name*|ï¼‰ï¼›value å¯ä»¥åœ¨å‰åæ·»åŠ å¤§æ‹¬å·ï¼Œä¹Ÿå¯ä»¥ä¸æ·»åŠ ã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„ |\shtsetup| å‘½ä»¤å†…\emph{ä¸èƒ½æœ‰ç©ºè¡Œ}ã€‚
%
% \subsubsection{å­¦ä½ä¿¡æ¯}
% \DescribeMacro{degree-name}
% \DescribeMacro{degree-name*}
% ç ”ç©¶ç”Ÿå­¦ä½è®ºæ–‡éœ€è¦é¢å¤–è®¾å®šçš„å­¦ä½ä¿¡æ¯åŒ…æ‹¬ï¼šå­¦ä½åç§°ï¼ˆdegree-nameï¼‰å’Œè‹±æ–‡å­¦ä½åç§°ï¼ˆdegree-name*ï¼‰ï¼Œå…·ä½“è§è¡¨~\ref{tab::degree_info}ã€‚å­¦ä½ç±»å‹ä¼šå½±å“ \shtthesis{} çš„ä¸­è‹±æ–‡å°é¢å†…å®¹ã€‚
% \begin{table}[htb]
% \centering
% \caption{éœ€é¢å¤–è®¾å®šçš„\emph{ç ”ç©¶ç”Ÿ}å­¦ä½ä¿¡æ¯} \label{tab::degree_info}
% \begin{tabular}{ll}
%   \toprule
%   degree-name & degree-name* \\
%   \midrule
%   å­¦æœ¯å‹åšå£« & Doctor~of~Philosophy \\
%   ç†å­¦ç¡•å£« & Master~of~Natural~Science \\
%   å·¥å­¦ç¡•å£« & Master~of~Science~in~Engineering \\
%   \bottomrule
% \end{tabular}
% \end{table}
% 
% \subsubsection{è®ºæ–‡æ ‡é¢˜ä¿¡æ¯}
% \DescribeMacro{title}
% \DescribeMacro{title*}
% \DescribeMacro{secret-level}
% è®¾å®šè®ºæ–‡ä¸­è‹±æ–‡æ ‡é¢˜å’Œæ¶‰å¯†ç­‰çº§ã€‚ä¸­æ–‡æ ‡é¢˜ï¼ˆtitleï¼‰å’Œè‹±æ–‡æ ‡é¢˜ï¼ˆtitle*ï¼‰ä¸­å¯ä»¥åŒ…å«æ¢è¡Œç¬¦ã€‚ç ”ç©¶ç”Ÿå­¦ä½è®ºæ–‡çš„æ¶‰å¯†ç­‰çº§ï¼ˆsecret-levelï¼‰ä¼šä»¥â€œå¯†çº§ï¼š\uline{XXX}â€æ˜¾ç¤ºåœ¨ä¸­æ–‡å°é¢å³ä¸Šè§’ï¼Œæœªè®¾å®šæ¶‰å¯†ç­‰çº§åˆ™ä¸æ˜¾ç¤ºç›¸å…³ä¿¡æ¯ã€‚
% 
% \subsubsection{ä½œè€…ä¿¡æ¯}
% \DescribeMacro{discipline}
% \DescribeMacro{discipline*}
% \DescribeMacro{discipline-level-1}
% \DescribeMacro{discipline-level-1*}
% éœ€è¦è®¾å®šçš„ä½œè€…ä¿¡æ¯åŒ…æ‹¬ï¼šä½œè€…ä¸­è‹±æ–‡å§“åï¼ˆauthor å’Œ author*ï¼‰å’Œå­¦æ ¡/å­¦é™¢ä¸­è‹±æ–‡åç§°ï¼ˆinstitution å’Œ institution*ï¼‰ï¼Œç ”ç©¶ç”Ÿéœ€è¦è®¾å®šä¸€çº§å­¦ç§‘ä¸­è‹±æ–‡åç§°ï¼ˆdiscipline-level-1 å’Œ discipline-level-1*ï¼‰ï¼Œæœ¬ç§‘ç”Ÿéœ€è¦è®¾å®šæ”»è¯»ä¸“ä¸šä¸­è‹±æ–‡åç§°ï¼ˆdiscipline å’Œ discipline*ï¼‰ã€‚
% 
% ç‰¹åˆ«æ³¨æ„ç ”ç©¶ç”Ÿå’Œæœ¬ç§‘ç”Ÿçš„è‹±æ–‡åæ ¼å¼è¦æ±‚ä¸ä¸€è‡´ï¼šç ”ç©¶ç”Ÿè¦æ±‚ä»¥å§“æ°æ‹¼éŸ³åœ¨å‰ã€åå­—æ‹¼éŸ³åœ¨åã€ä¸­é—´ä»¥åŠè§’ç©ºæ ¼åˆ†éš”ï¼š
% \DescribeMacro{author}
% \DescribeMacro{author*}
% \begin{latex}
% \shtsetup{
%   % ç ”ç©¶ç”Ÿä¸­è‹±æ–‡å§“åæ ¼å¼è¦æ±‚
%   author = ææ¶¦ä¸œ,
%   author* = {Li~Rundong}, % æ­£ç¡®å†™æ³•
%   % author* = {Rundong~Li}, % é”™è¯¯å†™æ³•
% }
% \end{latex}
% è€Œæœ¬ç§‘ç”Ÿè¦æ±‚ä»¥åå­—æ‹¼éŸ³åœ¨å‰ã€å§“æ°æ‹¼éŸ³åœ¨åã€ä¸­é—´ä»¥åŠè§’ç©ºæ ¼åˆ†éš”ï¼š
% \begin{latex}
% \shtsetup{
%   % æœ¬ç§‘ç”Ÿä¸­è‹±æ–‡å§“åæ ¼å¼è¦æ±‚
%   author = ææ¶¦ä¸œ,
%   author* = {Rundong~Li}, % æ­£ç¡®å†™æ³•
%   % author* = {Li~Rundong}, % é”™è¯¯å†™æ³•
% }
% \end{latex}
% 
% ç ”ç©¶ç”Ÿéœ€è¦è®¾å®šå®Œæ•´çš„å­¦æ ¡ã€å­¦é™¢åç§°ï¼Œä¸­æ–‡åç§°ï¼ˆinstitutionï¼‰ä¸å¯å¸¦æ¢è¡Œç¬¦ï¼Œè‹±æ–‡åç§°ï¼ˆinstitution*ï¼‰åº”åœ¨å­¦é™¢ã€å­¦æ ¡åç§°é—´åŠ å…¥æ¢è¡Œç¬¦ï¼Œå¦åˆ™å°é¢æ’ç‰ˆä¼šå‡ºç°é”™è¯¯ï¼š
% \DescribeMacro{institution}
% \DescribeMacro{institution*}
% \begin{latex}
% \shtsetup{
%   institution = ä¸Šæµ·ç§‘æŠ€å¤§å­¦ä¿¡æ¯ç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢,
%   institution* = {School~of~Information~Science~and~Technology\\%
%                   ShanghaiTech~University},
% }
% \end{latex}
% æœ¬ç§‘ç”Ÿåˆ™ä¸å¿…åŒ…å«å­¦æ ¡åç§°ï¼Œç›´æ¥è®¾å®šå­¦é™¢åç§°å³å¯ï¼Œæ³¨æ„ä¸­è‹±æ–‡åç§°ä¸­å‡ä¸èƒ½åŒ…å«æ¢è¡Œç¬¦ï¼š
% \begin{latex}
% \shtsetup{
%   institution = ä¿¡æ¯ç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢,
%   institution* = {School~of~Information~Science~and~Technology},
% }
% \end{latex}
% 
% \subsubsection{å¯¼å¸ˆä¿¡æ¯}
% \DescribeMacro{supervisor}
% \DescribeMacro{supervisor*}
% \DescribeMacro{supervisor-institution}
% éœ€è¦è®¾å®šçš„å¯¼å¸ˆä¿¡æ¯åŒ…æ‹¬ï¼šå¯¼å¸ˆä¸­è‹±æ–‡å§“åï¼ˆsupervisor å’Œ supervisor*ï¼‰å’Œå¯¼å¸ˆå•ä½ä¸­æ–‡åç§°ï¼ˆsupervisor-institutionï¼Œä»…éœ€ç ”ç©¶ç”Ÿè®ºæ–‡è®¾å®šï¼‰ã€‚åœ¨ç ”ç©¶ç”Ÿè®ºæ–‡ä¸­æ–‡å°é¢ä¸­ï¼Œå¯¼å¸ˆå§“åå’Œå•ä½åˆ†ä¸¤è¡Œæ˜¾ç¤ºåœ¨â€œæŒ‡å¯¼æ•™å¸ˆâ€æ¡ç›®ä¸‹ã€‚å¯¼å¸ˆä¸­æ–‡å§“ååº”åŒ…å«å¯¼å¸ˆèŒç§°ï¼Œå¦‚æ•™æˆã€å‰¯æ•™æˆã€åŠ©ç†æ•™æˆã€ç ”ç©¶å‘˜ã€å‰¯ç ”ç©¶å‘˜ï¼Œä»¥ä¸€ä¸ªåŠè§’ç©ºæ ¼è·Ÿéšåœ¨å§“åä¹‹åï¼›å¯¼å¸ˆè‹±æ–‡å§“ååˆ™ç»Ÿä¸€ä»¥â€œProfessorâ€å¼€å¤´ï¼Œä¸è‹±æ–‡å§“åä»¥ä¸€ä¸ªåŠè§’ç©ºæ ¼éš”å¼€ã€‚å¯¼å¸ˆå•ä½ä¸­æ–‡åç§°ä¸å¯åŒ…å«æ¢è¡Œç¬¦ã€‚
% \begin{latex}
% \shtsetup{
%   supervisor = {èŒƒç¿~å‰¯æ•™æˆ},
%   supervisor* = {Professor~Fan~Rui},
%   supervisor-institution = {ä¸Šæµ·ç§‘æŠ€å¤§å­¦ä¿¡æ¯ç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢},
% }
% \end{latex}
% 
% \subsubsection{æˆæ–‡æ—¥æœŸ}
% \DescribeMacro{date}
% \DescribeMacro{date*}
% é€šè¿‡ date å’Œ date* åˆ†åˆ«è®¾ç½®ä¸­è‹±æ–‡æˆæ–‡æ—¥æœŸï¼Œæ—¥æœŸå†…å®¹åº”æŒ‰ç…§ç”³è¯·å­¦ä½çš„æ—¶é—´èŠ‚ç‚¹å¡«å†™ï¼Œå…·ä½“è¯·å‚è€ƒå½“å¹´ã€Šè§„èŒƒã€‹ã€‚ç ”ç©¶ç”Ÿæˆæ–‡æ—¥æœŸæ ¼å¼ä¸ºï¼š
% \begin{latex}
% \shtsetup{
%   date = {2020~å¹´~6~æœˆ},
%   date* = {June,~2020},
% }
% \end{latex}
% æœ¬ç§‘ç”Ÿæˆæ–‡æ—¥æœŸæ ¼å¼ä¸ºï¼š
% \begin{latex}
% \shtsetup{
%   date = {2020~å¹´~06~æœˆ},
%   date* = {06~/~2020},
% }
% \end{latex}
% 
% \section{è®ºæ–‡å†…å®¹}
% \subsection{å‰è¨€éƒ¨åˆ†}
% è®ºæ–‡å‰è¨€éƒ¨åˆ†åº”åŒ…å«è®ºæ–‡åŸåˆ›æ€§å£°æ˜å’Œæˆæƒä½¿ç”¨å£°æ˜ã€ä¸­è‹±æ–‡æ‘˜è¦ã€ç›®å½•ï¼Œç ”ç©¶ç”Ÿè®ºæ–‡è¿˜éœ€åŒ…å«å›¾å½¢ã€è¡¨æ ¼åˆ—è¡¨ã€‚è‹¥æœ‰éœ€è¦ï¼Œå¯åŠ å…¥ç¬¦å·åˆ—è¡¨ã€‚\shtthesis{} ä¼šè‡ªåŠ¨ç”Ÿæˆç›®å½•å’Œå›¾è¡¨åˆ—è¡¨ï¼Œåœ¨ä¸è®¾ç½® |anonymous| é€‰é¡¹æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆå£°æ˜é¡µã€‚\shtthesis{} æä¾›äº†æ‘˜è¦å’Œç¬¦å·åˆ—è¡¨ç¯å¢ƒï¼Œä»¥ä¾¿äºç”¨æˆ·ç”Ÿæˆä¸­è‹±æ–‡æ‘˜è¦å’Œç¬¦å·åˆ—è¡¨ã€‚
% 
% \subsubsection{è®ºæ–‡æ‘˜è¦åŠå…³é”®è¯}
% \DescribeEnv{abstract}
% \DescribeEnv{abstract*} 
% è®ºæ–‡ä¸­è‹±æ–‡æ‘˜è¦åœ¨æ­£æ–‡éƒ¨åˆ† |\frontmatter| ä¹‹åã€|\makeindices| ä¹‹å‰ï¼Œåˆ†åˆ«åœ¨ abstract å’Œ abstract* ç¯å¢ƒä¸­è¾“å…¥ã€‚æ‘˜è¦ç¯å¢ƒå¯¹å†…å®¹æ²¡æœ‰é™åˆ¶ï¼š
% \begin{latex}
% \begin{abstract}
%   ä¸­æ–‡æ‘˜è¦å†…å®¹...
% \end{abstract}
% 
% \begin{abstract*}
%   English abstract content...
% \end{abstract*}
% \end{latex}
% 
% \DescribeMacro{flattitle}
% éœ€è¦æ³¨æ„ï¼Œæœ¬ç§‘ç”Ÿè®ºæ–‡è¦æ±‚åœ¨ä¸­è‹±æ–‡æ‘˜è¦ä¸­åŒ…å«è®ºæ–‡æ ‡é¢˜ã€‚å¦‚æœå¸Œæœ›åœ¨æ‘˜è¦ä¸­æ˜¾ç¤ºçš„æ ‡é¢˜ä¸æ¢è¡Œï¼Œå¯ä»¥æŒ‡å®š |flattitle| é€‰é¡¹ï¼Œæ’ç‰ˆæ—¶ä¼šå°† title å’Œ title* ä¸­çš„æ¢è¡Œç¬¦æ›¿æ¢ä¸ºç©ºæ ¼ï¼š
% \begin{latex}
% \begin{abstract}[flattitle]
%   % æ‘˜è¦æ ‡é¢˜æ’ç‰ˆæ—¶ä¸æ¢è¡Œ
%   ä¸­æ–‡æ‘˜è¦å†…å®¹...
% \end{abstract}
% \end{latex}
% 
% \DescribeMacro{keywords}
% \DescribeMacro{keywords*}
% è®ºæ–‡ä¸­è‹±æ–‡å…³é”®è¯åœ¨ |\shtsetup| å‘½ä»¤ä¸­åˆ†åˆ«ä»¥ keywords å’Œ keywords* è®¾å®šã€‚æ³¨æ„ \shtthesis{} \fileversion{} ä¸­å°šæœªå®ç°åˆ†è¯å¤„ç†ï¼Œæ­¤å¤„è¾“å…¥çš„ value å°†ä¸ç»ä»»ä½•é¢„å¤„ç†ï¼Œç›´æ¥æ’å…¥è‡³æ­£æ–‡ä¸­æ’ç‰ˆã€‚å› æ­¤ï¼Œä¸­æ–‡å…³é”®è¯ï¼ˆkeywordsï¼‰ä¹‹é—´åº”è¯¥ä»¥ä¸­æ–‡é€—å·â€œï¼Œâ€éš”å¼€ä¸”ä¸åŒ…å«ç©ºæ ¼ï¼›è‹±æ–‡å…³é”®è¯ï¼ˆkeywords*ï¼‰ä¹‹é—´åº”è¯¥ä»¥åŠè§’é€—å·â€œ,â€éš”å¼€ï¼Œå¹¶åœ¨æ¯ä¸€åŠè§’é€—å·åè·Ÿéšä¸€ä¸ªåŠè§’ç©ºæ ¼ã€‚
% \begin{latex}
% \shtsetup{
%   keywords = {ä¸Šæµ·ç§‘æŠ€å¤§å­¦ï¼Œå­¦ä½è®ºæ–‡ï¼Œ\LaTeX{}},
%   keywords* = {ShanghaiTech~University, Thesis, \LaTeX{}},
% }
% \end{latex}
% 
% \subsubsection{ç›®å½•åŠå›¾å½¢ã€è¡¨æ ¼ã€ç¬¦å·åˆ—è¡¨}
% \DescribeMacro{\makeindices}
% \shtthesis{} é‡è½½äº† |\makeindices| å‘½ä»¤ï¼Œå¯ä¸€æ¬¡ç”Ÿæˆç›®å½•ã€å›¾å½¢åˆ—è¡¨å’Œè¡¨æ ¼åˆ—è¡¨ã€‚é»˜è®¤ç›®å½•ä¸­æ­£æ–‡æ ‡é¢˜åˆ—å‡ºè‡³ç¬¬ 3 çº§ï¼ˆå³ subsectionï¼‰ï¼Œè‹¥åŒ…å«é™„å½•åˆ™ç›®å½•ä¸­åªåˆ—å‡ºâ€œé™„å½•â€ä¸€é¡¹ï¼ˆé™„å½•å„çº§æ ‡é¢˜ä»ä¼šç”Ÿæˆ PDF ä¹¦ç­¾ï¼‰ï¼Œå›¾å½¢ã€è¡¨æ ¼åˆ—è¡¨ä¸­åˆ—å‡ºå›¾è¡¨æ ‡é¢˜çš„å…¨éƒ¨å†…å®¹ã€‚å¯¹äºç‰¹åˆ«é•¿çš„å›¾å½¢ã€è¡¨æ ¼æ ‡é¢˜ï¼Œå¯ä»¥åœ¨ |\caption| å‘½ä»¤ä¸­æŒ‡å®šçŸ­æ ‡é¢˜ï¼Œä»è€Œä½¿åˆ—è¡¨æ¡ç›®æ›´ä¸ºç®€æ˜ï¼š
% \begin{latex}
% \begin{figure}
%   \caption`\oarg{å‡ºç°åœ¨å›¾å½¢åˆ—è¡¨å†…çš„çŸ­æ ‡é¢˜}\marg{å‡ºç°åœ¨æ­£æ–‡ä¸­çš„é•¿æ ‡é¢˜}'
%   % ...
% \end{figure}
% \end{latex}
% 
% \DescribeEnv{nomenclatures}
% \shtthesis{} æä¾›äº† nomenclatures ç¯å¢ƒç”¨äºåœ¨ç ”ç©¶ç”Ÿè®ºæ–‡ä¸­ç”Ÿæˆç¬¦å·åˆ—è¡¨ï¼Œå…¶ä½¿ç”¨æ–¹æ³•ä¸ºï¼š
% \begin{latex}
% \begin{nomenclatures}`\oarg{æ ‡é¢˜}'
%   \head`\oarg{å•ä½è¡¨å¤´}\marg{ç¬¦å·è¡¨å¤´}\marg{æè¿°è¡¨å¤´}'
%   \item`\oarg{å•ä½}\marg{ç¬¦å·}\marg{æè¿°}'
%   % ...
% \end{nomenclatures}
% \end{latex}
% æ¯æ¬¡ nomenclatures è°ƒç”¨ä¼šåˆ†åˆ«ç”Ÿæˆä¸€ç»„ç¬¦å·åˆ—è¡¨ï¼Œæ¯ä¸€ |\item| ä¼šç”Ÿæˆä¸€è¡Œç¬¦å·æè¿°ã€‚è‹¥ \meta{æ ‡é¢˜} ä¸ä¸ºç©ºåˆ™ä¼šä¸ºå½“å‰ç»„ç”Ÿæˆä¸€ä¸ªä¸ç¼–å·çš„ section çº§çš„æ ‡é¢˜ã€‚|\head| ä¸ºå¯é€‰æŒ‡ä»¤ï¼Œä¼šä¸ºå½“å‰ç»„ç”Ÿæˆä¸€ä¸ªâ€œè¡¨å¤´â€ï¼Œä½†å¿…é¡»åœ¨ |\item| ä¹‹å‰åˆ—å‡ºã€‚|\item| æ¥å—ä¸€ä¸ªå¯é€‰å‚æ•° \meta{å•ä½} ä½œä¸ºç¬¦å·çš„å•ä½ï¼Œè‹¥å…¶ä¸ä¸ºç©ºåˆ™åœ¨å½“å‰è¡Œå³å¯¹é½å‡ºç°ã€‚nomenclatures çš„ä½¿ç”¨æ ·ä¾‹å¯ä»¥å‚è€ƒ \jobname.tex ä¸­â€œç¬¦å·åˆ—è¡¨â€éƒ¨åˆ†ã€‚æ³¨æ„åœ¨ \shtthesis{} \fileversion{} ä¸­å„ |\item| çš„ \meta{æè¿°} åœ¨æŠ˜è¡Œåä¼šå‡ºç°æ’ç‰ˆé”™è¯¯ï¼Œæ•…æš‚æ—¶ä¸æ”¯æŒè¾ƒé•¿çš„ç¬¦å·æè¿°ã€‚
% 
% \subsection{æ­£æ–‡éƒ¨åˆ†}
% \shtthesis{} æ­£æ–‡éƒ¨åˆ†çš„ä¹¦å†™ä¸ä¸€èˆ¬ \LaTeX é¡¹ç›®æ— å¼‚ã€‚\shtthesis{} ä¸ºç ”ç©¶ç”Ÿè®ºæ–‡ä¿®æ”¹å…¬å¼ç¼–å·æ ¼å¼ä»¥ç¬¦åˆã€Šè§„èŒƒã€‹è¦æ±‚ï¼Œå¹¶æä¾›ç¼–å·å®šç†ã€è¯æ˜ç­‰å¸¸ç”¨æ•°å­¦ç¯å¢ƒã€‚æ–‡çŒ®å¼•ç”¨éµå¾ª GB/T 7714-2015 ã€Šä¿¡æ¯ä¸æ–‡çŒ®ã€€å‚è€ƒæ–‡çŒ®è‘—å½•è§„åˆ™ã€‹æ ‡å‡†ã€‚
% 
% \subsubsection{ç¼–å·å…¬å¼}
% åœ¨æ’ç‰ˆç ”ç©¶ç”Ÿè®ºæ–‡æ—¶ï¼Œ\shtthesis{} é€šè¿‡ \textsf{mathtools} å®åŒ…åœ¨å…¬å¼ç¼–å·å‰æ·»åŠ  $\ldots$ ä»¥ç¬¦åˆã€Šè§„èŒƒã€‹å¯¹å…¬å¼ç¼–å·çš„æ ¼å¼è¦æ±‚ï¼Œå¦‚ï¼š
% \begin{equation}
% \usetagform{dots}
% ğ‘ƒ(ğ´âˆ£ğµ) = \frac{ğ‘ƒ(ğ´)ğ‘ƒ(ğµâˆ£ğ´)}{ğ‘ƒ(ğµ)} \label{eq::bayesian}
% \end{equation}
% åŒæ—¶é‡è½½äº† |\eqref|ï¼Œä½¿å¾—å…¬å¼ç¼–å·æ ¼å¼ä¿®æ”¹åï¼Œå…¶å¼•ç”¨æ ¼å¼ä»ä¸ \textsf{amsmath} æ— å¼‚ï¼šè´å¶æ–¯å®šç†~\eqref{eq::bayesian}ã€‚æ’ç‰ˆæœ¬ç§‘ç”Ÿè®ºæ–‡æ—¶ä¸ä¿®æ”¹å…¬å¼ç¼–å·æ ¼å¼ã€‚
% 
% \shtthesis{} ä½¿ç”¨ \textsf{unicode-math} å®åŒ…è¿›è¡Œå…¬å¼æ’ç‰ˆï¼Œå› æ­¤åœ¨æ•°å­¦ç¯å¢ƒå†…æ—¢å¯ä»¥ç”¨æ ‡å‡† \LaTeX{} å®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥ Unicode ç¬¦å·ã€‚ä¾‹å¦‚ $\oiint$ ç¬¦å·å¯ä»¥é€šè¿‡ |$\oiint$| å®å½•å…¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Unicode ç¬¦å· |$|$âˆ¯$|$| ï¼ˆå¯¹åº” |U+0222F| ç ç‚¹ï¼‰ å½•å…¥ã€‚\textsf{unicode-math} æ”¯æŒçš„ç¬¦å·å¯ä»¥é€šè¿‡
% \begin{shell}
% `\prompt' texdoc unimath-symbols
% \end{shell}
% æ‰“å¼€ \textsf{unicode-math} symbols æ–‡æ¡£æŸ¥æ‰¾å’Œå¤åˆ¶å½•å…¥ã€‚
% 
% \subsubsection{æ•°å­¦ç¯å¢ƒ}
% \DescribeEnv{theorem}
% \DescribeEnv{lemma}
% \DescribeEnv{corollary}
% \DescribeEnv{proposition}
% \DescribeEnv{conjecture}
% \DescribeEnv{definition}
% \DescribeEnv{axiom}
% \DescribeEnv{example}
% \DescribeEnv{problem}
% \DescribeEnv{exercise}
% \DescribeEnv{remark}
% \DescribeEnv{proof}
% \shtthesis é€šè¿‡ \textsf{ntheorem} å®åŒ…å®šä¹‰äº†å¸¸ç”¨çš„æ•°å­¦ç¯å¢ƒå’Œè¯æ˜ç¯å¢ƒï¼Œå¦‚è¡¨~\ref{tab::math_envs} æ‰€åˆ—ã€‚å…¶ä¸­ï¼Œè‹±æ–‡è¡¨ç¤º tex æ–‡æ¡£å†…è°ƒç”¨çš„ç¯å¢ƒåç§°ï¼Œä¸­æ–‡è¡¨ç¤ºæ’ç‰ˆåè®ºæ–‡ä¸­æ˜¾ç¤ºçš„ç¯å¢ƒåç§°ã€‚æ³¨æ„ï¼Œåœ¨ä½¿ç”¨ \hologo{LuaTeX} å¼•æ“ç¼–è¯‘æ—¶ï¼Œè¯æ˜ç¯å¢ƒç»“å°¾çš„ QED ç¬¦å· $\QED$ å¯èƒ½ä¼šæ’ç‰ˆå‡ºé”™ã€‚
% 
% \begin{table}[htb]
% \centering
% \caption{\shtthesis æä¾›çš„æ•°å­¦ç¯å¢ƒ}
% \label{tab::math_envs}
% \begin{tabular}{*{5}{c}}
%   \toprule
%   theorem & lemma & corollary & proposition & conjecture \\
%   å®šç†    & å¼•ç†  & æ¨è®º       & å‘½é¢˜        & çŒœæƒ³       \\
%   \midrule
%   definition & axiom & example & problem & exercise \\
%   å®šä¹‰       & å…¬ç†  & ä¾‹       & é—®é¢˜    & ç»ƒä¹      \\
%   \midrule
%   remark & proof & & & \\
%   æ³¨ & è¯æ˜ & & & \\
%   \bottomrule
% \end{tabular}
% \end{table}
% 
% \subsubsection{æ–‡çŒ®å¼•ç”¨} \label{sec::citation}
% \DescribeMacro{\makebiblio}
% \shtthesis{} é€šè¿‡ \textsf{biblatex} å®åŒ…æ”¯æŒç¬¦åˆ GB/T 7714-2015 æ ‡å‡†çš„æ–‡çŒ®å¼•ç”¨ã€‚æœ¬ç§‘ç”Ÿè®ºæ–‡ä½¿ç”¨é¡ºåºç¼–ç åˆ¶ï¼Œç ”ç©¶ç”Ÿè®ºæ–‡ä½¿ç”¨â€œè‘—è€…-å‡ºç‰ˆå¹´â€åˆ¶ã€‚å‚è€ƒæ–‡çŒ®æ•°æ®åº“é€šè¿‡ |\shtsetup| çš„ bib-resource é€‰é¡¹æŒ‡å®šï¼Œæ­£æ–‡å‚è€ƒæ–‡çŒ®ç« èŠ‚é€šè¿‡ |\makebiblio| å‘½ä»¤ç”Ÿæˆï¼š
% \begin{latex}
% % preamble
% \shtsetup{
%   bib-resource = {reference.bib},
% }
% % document
% \makebiblio
% \end{latex}
% 
% \paragraph{é¡ºåºç¼–ç åˆ¶}
% \DescribeMacro{\cite}
% \DescribeMacro{\inlinecite}
% å¼•ç”¨æ¡ç›®æ’ç‰ˆä¸ºæ•°å­—ç¼–å·ï¼Œå‚è€ƒæ–‡çŒ®åˆ—è¡¨æŒ‰ç…§å„æ¡ç›®åœ¨æ­£æ–‡ä¸­è¢«å¼•ç”¨é¡ºåºæ’åˆ—ã€‚
% \begin{center}
% \begin{tabular}{ll}
% \toprule
% |\cite{liu2013latex}|& ä¸Šæ ‡å¼•ç”¨~\cite{liu2013latex}\\
% |\inlinecite{liu2013latex}|& è¡Œå†…å¼•ç”¨~\parencite{liu2013latex}\\
% \bottomrule
% \end{tabular}
% \end{center}
% 
% \paragraph{â€œè‘—è€…-å‡ºç‰ˆå¹´â€åˆ¶}
% \DescribeMacro{\citet}
% \DescribeMacro{\citep}
% \DescribeMacro{\citeauthor}
% \DescribeMacro{\citeyear}
% å¼•ç”¨æ–¹å¼ä¸ \textsf{natbib} ä¸€è‡´ï¼Œå‚è€ƒæ–‡çŒ®åˆ—è¡¨å„æ¡ç›®æŒ‰ç…§è¯­è¨€åˆ†ç»„åï¼ŒæŒ‰ç…§å­—æ¯åºæ’åˆ—ã€‚
% \begin{center}
% \begin{tabular}{ll}
% \toprule
% |\citet{liu2013latex}|& æ–‡æœ¬å¼•ç”¨ \citeauthor{liu2013latex} (\citeyear{liu2013latex})\\
% |\citep{liu2013latex}|& æ‹¬å·å¼•ç”¨ (\citeauthor{liu2013latex}, \citeyear{liu2013latex})\\
% |\citeauthor{liu2013latex}|& å¼•ç”¨ä½œè€… \citeauthor{liu2013latex}\\
% |\citeyear{liu2013latex}|& å¼•ç”¨å¹´ä»½ \citeyear{liu2013latex}\\
% \bottomrule
% \end{tabular}
% \end{center}
% 
% éœ€è¦æ³¨æ„è‹¥æ–‡çŒ®æ¡ç›®çš„ä½œè€…å§“åéè‹±æ–‡ï¼Œåˆ™éœ€é¢å¤–å¢åŠ  key å­—æ®µæŒ‡å®šä½œè€…è‹±æ–‡å§“åï¼Œå¹¶åœ¨å§“æ°æ‹¼è‹±ååŠ æ³¨éŸ³è°ƒï¼Œä»¥ç¡®ä¿æ–‡çŒ®æ¡ç›®åœ¨æ–‡æœ«çš„å‚è€ƒæ–‡çŒ®ä¸­æ­£ç¡®æ’åˆ—ã€‚ä¾‹å¦‚ï¼š
% \begin{latex}
% @incollection{chen1980zhongguo,
%   author = {é™ˆæ™‹é•³ and å¼ æƒ æ°‘ and æœ±å£«å…´ and èµµéœ‡ and ç‹æŒ¯åˆš},
%   key    = {Chen2 Jing Ao Zhang1 Hui Ming Zhu1 Shi Xing Zhao4 Zhen Wang2 Zhen Gang},
%   % ...
% }
% \end{latex}
% 
% \subsubsection{åˆ—è¡¨ç¯å¢ƒ}
% \DescribeEnv{enumerate}
% \DescribeEnv{itemize}
% \DescribeEnv{description}
% \shtthesis{} å¾®è°ƒäº†ç¼–å·åˆ—è¡¨ï¼ˆenumerateï¼‰ã€éç¼–å·åˆ—è¡¨ï¼ˆitemizeï¼‰å’Œå…³é”®å­—åˆ—è¡¨ï¼ˆdescriptionï¼‰ç¯å¢ƒä»¥é€‚åº”ä¸­æ–‡æ’ç‰ˆæƒ¯ä¾‹ã€‚ç¼–å·åˆ—è¡¨é»˜è®¤ä½¿ç”¨æ•°å­—ç¼–å·ï¼Œå¯ä»¥ä½¿ç”¨çŸ­æ ‡ç­¾å½¢å¼æŒ‡å®šç¼–å·æ ¼å¼ï¼ˆä¾‹å¦‚ |[a)]| åˆ‡æ¢è‡³å°å†™å­—æ¯+åŠè§’æ‹¬å·ç¼–å·ï¼‰ã€‚è¿˜å¯ä»¥é€šè¿‡ |resume*| å‚æ•°â€œç»§ç»­â€è¢«ä¸­æ–­çš„åˆ—è¡¨ç¼–å·ã€‚å…³é”®å­—åˆ—è¡¨ç¯å¢ƒåœ¨æ¯ä¸€æ¡ç›®å…³é”®å­—åå¢åŠ äº†åŠ ç²—å…¨è§’å†’å·â€œ\textbf{ï¼š}â€ä»¥é€‚åº”ä¸­æ–‡æ’ç‰ˆæƒ¯ä¾‹ã€‚
% 
% \subsection{é™„å½•åŠåè®°} \label{sec::backmatter}
% \DescribeMacro{\appendix}
% æ­£æ–‡å®Œæˆåï¼Œä½¿ç”¨ |\appendix| å‘½ä»¤åå³å¯åˆ‡æ¢è‡³é™„å½•æ¨¡å¼ã€‚é»˜è®¤ç›®å½•ä¸­åªæ˜¾ç¤ºâ€œé™„å½•â€ä¸€é¡¹ï¼Œä¸æ˜¾ç¤ºé™„å½•å„çº§æ ‡é¢˜ã€‚
% \begin{latex}
% \appendix
% \chapter{...}
% % ...
% \end{latex}
% 
% ã€Šè§„èŒƒã€‹è¦æ±‚åœ¨æ–‡æœ«ä¾æ­¤åˆ—å‡ºè‡´è°¢ã€ä½œè€…ç®€å†ã€æ”»è¯»å­¦ä½æœŸé—´å‘è¡¨çš„è®ºæ–‡ä¸ç ”ç©¶æˆæœã€‚\shtthesis{} æä¾›äº† acknowledgementã€resumeã€publicationsã€patterns å’Œ projects æ’ç‰ˆç¯å¢ƒã€‚åŒæ—¶ä¸ºäº†ç”Ÿæˆç¬¦åˆç›²å®¡è¦æ±‚çš„è®ºæ–‡ï¼Œ\shtthesis{} ä¹Ÿæä¾›äº†å¯¹åº”çš„\emph{åŒ¿åç¯å¢ƒ} publications*ã€patterns* å’Œ projects*ã€‚åœ¨æ‰“å¼€ |anonymous| é€‰é¡¹ï¼ˆç¬¬~\ref{sec::option_anonymous} èŠ‚ï¼‰åï¼Œè®ºæ–‡ä¸­ä¸å‡ºç°â€œè‡´è°¢â€ä¸€èŠ‚ï¼Œä½œè€…ç®€å†å†…å®¹æ›¿æ¢ä¸ºåŒ¿åå­—ç¬¦ä¸²ï¼Œå…¶ä»–èŠ‚ä½¿ç”¨åŒ¿åç¯å¢ƒå†…å®¹æ’ç‰ˆã€‚æ³¨æ„åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨ä»»ä¸€ä¸Šè¿°ç¯å¢ƒå‰ï¼Œéœ€è¦ä½¿ç”¨ |\backmatter| \DescribeMacro{\backmatter} åˆ‡æ¢è‡³åè®°æ¨¡å¼ã€‚
% 
% \subsubsection{è‡´è°¢}
% åœ¨ acknowledgement ç¯å¢ƒå†…ä¹¦å†™è‡´è°¢ï¼Œè‡´è°¢å†…å®¹åœ¨åŒ¿åæ¨¡å¼ä¸‹ä¸æ˜¾ç¤ºã€‚
% \DescribeEnv{acknowledgement}
% \begin{latex}
% \begin{acknowledgement}
%   è‡´è°¢ä¿¡æ¯â€¦â€¦
% \end{acknowledgement}
% \end{latex}
% 
% \subsubsection{ç®€å†åŠç§‘ç ”æˆæœ}
% \DescribeEnv{resume}
% \DescribeEnv{publications}
% \DescribeEnv{publications*}
% \DescribeEnv{patents}
% \DescribeEnv{patents*}
% \DescribeEnv{projects}
% \DescribeEnv{projects*}
% æ­¤éƒ¨åˆ†éœ€è¦ä¾æ­¤ä¹¦å†™ä¸ªäººç®€å†ï¼ˆresume ç¯å¢ƒï¼‰ã€å·²å‘è¡¨ï¼ˆæˆ–æ­£å¼æ¥å—ï¼‰çš„å­¦æœ¯è®ºæ–‡ï¼ˆpublications å’Œ publications* ç¯å¢ƒï¼‰ã€ç”³è¯·æˆ–å·²è·å¾—çš„ä¸“åˆ©ï¼ˆpatents å’Œ patents* ç¯å¢ƒï¼‰ã€å‚åŠ çš„ç ”ç©¶é¡¹ç›®åŠè·å¥–æƒ…å†µï¼ˆprojects å’Œ projects*ï¼‰ã€‚æ ¹æ®æ˜¯å¦åŒ¿ååˆ†åˆ«æ˜¾ç¤ºéåŒ¿åç¯å¢ƒå†…å®¹å’ŒåŒ¿åç¯å¢ƒå†…å®¹ã€‚
% \begin{latex}
% \begin{resume}
%   ä¸ªäººç®€å†â€¦â€¦ ï¼ˆä»…éåŒ¿åç¯å¢ƒæ˜¾ç¤ºï¼‰
% \end{resume}
%
% \begin{publications}
%   è®ºæ–‡å‘è¡¨è®°å½•â€¦â€¦ ï¼ˆéåŒ¿åæ—¶æ˜¾ç¤ºï¼‰
% \end{publications}
% 
% \begin{publications*}
%   è®ºæ–‡å‘è¡¨è®°å½•â€¦â€¦ ï¼ˆåŒ¿åæ—¶æ˜¾ç¤ºï¼‰
% \end{publications*}
% \end{latex}
%
% \printbibliography
%
% \iffalse sample bibliography database
%<*bib>
@online{bachelor2019,
  author = {ä¸Šæµ·ç§‘æŠ€å¤§å­¦æ•™å­¦äº‹åŠ¡å¤„},
  key = {shang hai ke ji da xue jiao xue shi wu chu},
  title = {æœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰è¡¨æ ¼æ¨¡æ¿ä¸‹è½½ï¼ˆä»»åŠ¡ä¹¦ã€å°é¢ã€æ’°å†™æ¨¡æ¿ç­‰ï¼‰},
  year = 2019,
  url = {http://oaa.shanghaitech.edu.cn/2019/0321/c4666a41070/page.htm},
  urldate = {2020-06-17}
}
@online{clerkma2013unicode,
  author = {Clerk Ma},
  title = {å¦‚ä½•åœ¨{XeTeX}ä¸­å•ç‹¬è®¾ç½®æ•°å­¦å­—ä½“ï¼Œä¸ºä»€ä¹ˆ{STIX}çš„æ•°å­¦å­—ä½“å¾ˆç‰›ï¼Ÿ},
  year = 2013,
  url = {https://www.zhihu.com/question/20592491/answer/15577847},
  urldate = {2020-06-30}
}
@book{liu2013latex,
  title={{\LaTeX}å…¥é—¨},
  author={åˆ˜æµ·æ´‹},
  key={liu2 hai yang},
  publisher={ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾},
  address={åŒ—äº¬},
  year={2013},
}
@online{oetiker2018not,
  author={Oetiker, Tobias and Partl, Hubert and Hyna, Irene and Schlegl, Elisabeth},
  title={The not so short introduction to {\LaTeX}2$\varepsilon$},
  year={2018},
  url = {http://mirrors.ctan.org/info/lshort/english/lshort.pdf},
  urldate = {2020-07-16},
}
@online{ctex2020not,
  author={{C\TeX{}}å¼€å‘å°ç»„},
  key = {ctex kai fa xiao zu},
  title={ä¸€ä»½(ä¸å¤ª)ç®€çŸ­çš„ {\LaTeX}2$\varepsilon$ ä»‹ç»},
  year={2020},
  url = {http://mirrors.ctan.org/info/lshort/chinese/lshort-zh-cn.pdf},
  urldate = {2020-07-16},
}
%</bib>
% \fi
% 
% \StopEventually{\PrintChanges\PrintIndex}
% \appendix
% \clearpage
% \section{ä¸»æ¨¡æ¿ç±» \shtthesis{} å®ç°}
%
% \subsection{å‰æœŸå‡†å¤‡}
% \subsubsection{æ–‡æ¡£ç±»ä¿¡æ¯å’Œå·¥å…·å®}
% \begin{macro}{\versiondate}
% \begin{macro}{\version}
% è®¾å®š \shtthesis{} å®åŒ…ç‰ˆæœ¬å·ä¸ç‰ˆæœ¬æ—¥æœŸã€‚
%    \begin{macrocode}
%<cls|doc>\NeedsTeXFormat{LaTeX2e}
%<*cls>
\newcommand\versiondate{2020/07/17}
\newcommand\version{0.3.2-dev}
\ProvidesClass{shtthesis}[%
  \versiondate\space%
  v\version\space%
  An Unofficial Thesis Template for ShanghaiTech University]
%</cls>
%    \end{macrocode}
% \end{macro}
% \end{macro}
%
% \begin{macro}{\ShtThesis}
% \begin{macro}{\shtthesis}
%  æä¾›ç®€å•çš„ |\shtthesis| å‘½ä»¤ä»¥æ’ç‰ˆå®åŒ…åç§°ã€‚
%    \begin{macrocode}
%<*(cls|doc)>
\newcommand\ShtThesis{\textup{\sffamily ShtThesis}}
\newcommand\shtthesis{\textup{\sffamily shtthesis}}
\hyphenation{sht-thesis}
\hyphenation{Sht-Thesis}
%</(cls|doc)>
%    \end{macrocode}
% \end{macro}
% \end{macro}
%
% å‡†å¤‡æ–‡æ¡£ç±»æŠ¥é”™ä¿¡æ¯å’Œå†…éƒ¨å·¥å…·å®ï¼Œå¹¶æ£€æŸ¥ç¼–è¯‘å¼•æ“æ˜¯å¦ä¸º \hologo{XeTeX} æˆ– \hologo{LuaTeX}ã€‚
%    \begin{macrocode}
%<*cls>
\def\sht@compile@err@help{%
  Pass `-pdflua' or `-pdfxe' option to `latexmk' on compilation.%
}
\newcommand\sht@error[2][\sht@compile@err@help]{\ClassError{shtthesis}{#2}{#1}}
\newcommand\sht@warning[1]{\ClassWarning{shtthesis}{#1}}
\RequirePackage{iftex}
\ifluatex\else\ifxetex\else%
  \sht@error{shtthesis only works with LuaTeX or XeTeX}%
\fi\fi
%</cls>
%    \end{macrocode}
%
% \subsubsection{\texttt{shtsetup} ç”¨æˆ·æ¥å£}
% \begin{macro}{\shtsetup}
% \fileversion{} çš„ |\shtsetup| ä»£ç å®ç°ä¿®æ”¹è‡ª \href{https://github.com/tuna/thuthesis/blob/17acabec987947768e35f0693c678ce654020bc2/thuthesis.dtx#L1133-L1349}{thuthesis}ï¼Œéå¸¸æ„Ÿè°¢è–›ç‘å°¼æ•™æˆå’Œ TUNA çš„å·¥ä½œï¼
%    \begin{macrocode}
%<*cls>
\RequirePackage{kvdefinekeys}
\RequirePackage{kvsetkeys}
\RequirePackage{datetime}
%</cls>
%    \end{macrocode}
%
% ä¸»è¦ç”¨æˆ·æ¥å£ï¼š
%    \begin{macrocode}
%<*cls>
\newcommand\shtsetup{%
  \kvsetkeys{sht}%
}
%</cls>
%    \end{macrocode}
%
% å®šä¹‰ keys çš„å¼€å‘æ¥å£ï¼š
%    \begin{macrocode}
%<*cls>
\newcommand\sht@define@key[1]{%
  \kvsetkeys{sht@key}{#1}%
}
%</cls>
%    \end{macrocode}
%
% \textsf{kvsetkeys} çš„ handler functionï¼Œv0.4.x ä¼šç”¨ \LaTeX3 é‡æ„ï¼š
%    \begin{macrocode}
%<*cls>
\kv@set@family@handler{sht@key}{%
  \@namedef{sht@#1@@name}{#1}%
  \def\sht@@default{}%
  \def\sht@@choices{}%
  \kv@define@key{sht@value}{name}{%
    \@namedef{sht@#1@@name}{##1}%
  }%
  \kv@define@key{sht@value}{code}{%
    \@namedef{sht@#1@@code}{##1}%
  }%
  \@namedef{sht@#1@@check}{}%
  \@namedef{sht@#1@@code}{}%
  \@namedef{sht@#1@@hook}{%
    \expandafter\ifx\csname\@currname.\@currext-h@@k\endcsname\relax
      \@nameuse{sht@#1@@code}%
    \else
      \AtEndOfClass{%
        \@nameuse{sht@#1@@code}%
      }%
    \fi
  }%
  \kv@define@key{sht@value}{choices}{%
    \def\sht@@choices{##1}%
    \@namedef{sht@#1@@reset}{}%
    \@namedef{sht@#1@@check}{%
      \@ifundefined{%
        ifsht@\@nameuse{sht@#1@@name}@\@nameuse{sht@\@nameuse{sht@#1@@name}}%
      }{%
        \sht@error{Invalid value "#1 = \@nameuse{sht@\@nameuse{sht@#1@@name}}"}%
      }%
      \@nameuse{sht@#1@@reset}%
      \@nameuse{sht@\@nameuse{sht@#1@@name}@\@nameuse{sht@\@nameuse{sht@#1@@name}}true}%
    }%
  }%
  \kv@define@key{sht@value}{default}{%
    \def\sht@@default{##1}%
  }%
  \kvsetkeys{sht@value}{#2}%
  \@namedef{sht@\@nameuse{sht@#1@@name}}{}%
  \kv@set@family@handler{sht@choice}{%
    \ifx\sht@@default\@empty
      \def\sht@@default{##1}%
    \fi
    \expandafter\newif\csname ifsht@\@nameuse{sht@#1@@name}@##1\endcsname
    \expandafter\g@addto@macro\csname sht@#1@@reset\endcsname{%
      \@nameuse{sht@\@nameuse{sht@#1@@name}@##1false}%
    }%
  }%
  \kvsetkeys@expandafter{sht@choice}{\sht@@choices}%
  \expandafter\let\csname sht@\@nameuse{sht@#1@@name}\endcsname\sht@@default
  \expandafter\ifx\csname sht@\@nameuse{sht@#1@@name}\endcsname\@empty\else
    \@nameuse{sht@#1@@check}%
    \@nameuse{sht@#1@@hook}%
  \fi
  \kv@define@key{sht}{#1}{%
    \@namedef{sht@\@nameuse{sht@#1@@name}}{##1}%
    \@nameuse{sht@#1@@check}%
    \@nameuse{sht@#1@@hook}%
  }%
}
%</cls>
%    \end{macrocode}
% å®šä¹‰ |\shtsetup| keys åŠé»˜è®¤ valuesï¼š
%    \begin{macrocode}
%<*cls>
\sht@define@key{
  degree-name = {
    default = {å·¥å­¦åšå£«},
    name    = degree@name,
  },
  degree-name* = {
    default = {Doctor~of~Philosophy},
    name    = degree@name@en,
  },
  language = {
    choices = {
      chinese,
      english,
    },
  },
  secret-level = {
    name = secret@level,
  },
  secret-year = {
    name = secret@year,
  },
  title = {
    default = {æ ‡é¢˜},
  },
  title* = {
    default = {Title},
    name    = title@en,
  },
  keywords,
  keywords* = {
    name = keywords@en,
  },
  author = {
    default = {å§“å},
  },
  author* = {
    default = {Name of author},
    name    = author@en,
  },
  author-id = {
    default = {Id of author},
    name    = author@id,
  },
  entrance-year = {
    default = {Year of entrance},
    name    = entrance@year,
  },
  supervisor = {
    default = {å¯¼å¸ˆå§“å},
  },
  supervisor* = {
    default = {Name of supervisor},
    name    = supervisor@en,
  },
  supervisor-institution = {
    name = supervisor@institution,
  },
  supervisor-institution* = {
    name = supervisor@institution@en,
  },
  institution,
  institution* = {
    name = institution@en
  },
  discipline,
  discipline* = {
    name = discipline@en,
  },
  discipline-level-1 = {
    default = {ä¸€çº§å­¦ç§‘åç§°},
    name    = discipline@level@i,
  },
  discipline-level-1* = {
    default = {Name of Level-one Discipline},
    name    = discipline@level@i@en,
  },
  discipline-level-2 = {
    default = {äºŒçº§å­¦ç§‘åç§°},
    name    = discipline@level@ii,
  },
  discipline-level-2* = {
    default = {Name of Level-two Discipline},
    name    = discipline@level@ii@en,
  },
  date = {
    default = {\the\year~å¹´~\the\month~æœˆ},
  },
  date* = {
    default = {\monthname,~\the\year},
    name = date@en,
  },
  clc,
  udc,
  id,
  anonymous-str = {
    name = anonymous@str,
    default = {***},
  },
  bib-resource = {
    name = bib@resource,
  }
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \subsubsection{è§£ææ–‡æ¡£ç±»é€‰é¡¹}
% \shtthesis{} çš„æ–‡æ¡£ç±»è§£æä¾èµ–äº \textsf{kvoptions}ï¼š
%    \begin{macrocode}
%<*cls>
\RequirePackage{kvoptions}
\SetupKeyvalOptions{
  family = sht,
  prefix = sht@,
}
%</cls>
%    \end{macrocode}
% è®¾å®šå­¦ä½ç±»å‹ï¼Œå­¦ä½å¿…é¡»è¢«è®¾å®šä¸”åªèƒ½è®¾å®šä¸€æ¬¡ã€‚
%    \begin{macrocode}
%<*cls>
\newif\ifsht@undergraduate
\newif\ifsht@graduate
\newif\ifsht@degree@set
\sht@degree@setfalse
\newcommand\sht@check@degree@set{%
  \ifsht@degree@set%
    \sht@error{you can only set degree once}%
  \else%
    \sht@degree@settrue%
  \fi%
}
\DeclareVoidOption{bachelor}{%
  \sht@check@degree@set%
  \sht@undergraduatetrue%
  \sht@graduatefalse%
  \def\sht@degree{bachelor}%
}
\DeclareVoidOption{master}{%
  \sht@check@degree@set%
  \sht@undergraduatefalse%
  \sht@graduatetrue%
  \def\sht@degree{master}%
}
\DeclareVoidOption{doctor}{%
  \sht@check@degree@set%
  \sht@undergraduatefalse%
  \sht@graduatetrue%
  \def\sht@degree{doctor}%
}
%</cls>
%    \end{macrocode}
% è®¾å®šåŒ¿åé€‰é¡¹ã€æ‰“å°ç‰ˆé€‰é¡¹å’Œæœ¬ç§‘ç”Ÿè®ºæ–‡çš„ comfort é€‰é¡¹ï¼Œå…¶ä»–ç±»é€‰é¡¹ä¼ é€’ç»™ \textsf{ctexbook}ã€‚æœ€åæ£€æŸ¥å­¦ä½è®¾å®šã€‚
%    \begin{macrocode}
%<*cls>
\DeclareBoolOption{anonymous}
\DeclareBoolOption{print}
\DeclareBoolOption{comfort}
\DeclareDefaultOption{\PassOptionsToClass{\CurrentOption}{ctexbook}}
\ProcessKeyvalOptions*
\ifsht@degree@set%
\else%
  \sht@error{you have not set degree (bachelor, master or doctor) yet}%
\fi%
%</cls>
%    \end{macrocode}
%
% \subsubsection{è½½å…¥ä¾èµ–å®åŒ…}
% \begin{quotation}
% è¦æ¥åŠ›ï¼è¦æ¥åŠ›ï¼ï¼ˆæŒ‡å®åŒ…é£æš´ï¼‰
% \end{quotation}
% æœ¬ç§‘ç”Ÿå’Œç ”ç©¶ç”Ÿè®ºæ–‡æ ¼å¼å·®åˆ«ï¼ˆå­—å·ã€å¼•ç”¨æ ¼å¼ï¼‰éœ€è¦ä½œä¸ºç±»é€‰é¡¹ä¼ é€’ç»™ \textsf{ctexbook} å’Œ \textsf{biblatex}ã€‚
%    \begin{macrocode}
%<*cls>
\ifsht@undergraduate
  \PassOptionsToClass{zihao = 5}{ctexbook}
  \PassOptionsToPackage{style = gb7714-2015}{biblatex}
\else
  \PassOptionsToClass{zihao = -4}{ctexbook}
  \PassOptionsToPackage{style = gb7714-2015ay}{biblatex}
\fi
\PassOptionsToClass{
  openany, 
  scheme = plain,
}{ctexbook}
\PassOptionsToPackage{
  hyperref    = manual,
  gbpub       = false,
  gbcitelocal = chinese,
}{biblatex}
\LoadClass{ctexbook}
\RequirePackage{expl3}
\RequirePackage{xparse}
\RequirePackage[hyperref, table]{xcolor}
\RequirePackage{geometry}
\RequirePackage{calc}
\RequirePackage{verbatim}
\RequirePackage{etoolbox}
\RequirePackage{ifthen}
\RequirePackage{graphicx}
\RequirePackage{indentfirst}
\RequirePackage[normalem]{ulem}
\RequirePackage{fancyhdr}
\RequirePackage{pageslts}
\RequirePackage{tocvsec2}
\RequirePackage{letltxmacro}
\RequirePackage{fontspec}
\RequirePackage{caption}
\RequirePackage[shortlabels, inline]{enumitem}
\RequirePackage{mathtools}
\RequirePackage[amsmath, thmmarks]{ntheorem}
\RequirePackage[mathbf=sym, mathrm=sym]{unicode-math}
\RequirePackage{biblatex}
%</cls>
%    \end{macrocode}
% ç¡®ä¿ \textsf{hyperref} æœ€åè¢«å¯¼å…¥ï¼Œä¹‹åæ‰‹åŠ¨æ‰“å¼€ \textsf{biblatex} çš„è¶…é“¾æ¥ï¼Œå¹¶ä½¿ç”¨ç­‰å®½ä½“æ’ç‰ˆè¶…é“¾æ¥ã€‚é“¾æ¥é…è‰²æ–¹æ¡ˆæ¥è‡ª \href{https://github.com/stone-zeng/fduthesis/blob/b72fb0e/source/fduthesis.dtx#L1377}{fduthesis}ï¼Œéå¸¸ä¼˜é›…ä¸”ç°ä»£ã€‚è°¢è°¢æ›¾ç¥¥ä¸œçš„å·¥ä½œï¼
%    \begin{macrocode}
%<*cls>
\AtEndPreamble{
  \RequirePackage{hyperref}
  \addbibresource{\sht@bib@resource}
  \BiblatexManualHyperrefOn
  \hypersetup{
    pdfencoding       = auto,
    psdextra          = true,
    bookmarksnumbered = true,
    pdftitle          = {\sht@flat@title},
    pdfauthor         = {\sht@author},
  }
  \ifsht@print
    \hypersetup{
      hidelinks,
      colorlinks = false,
    }
  \else
    \definecolor{fdu@link}{HTML}{990000}
    \definecolor{fdu@url}{HTML}{0000B2}
    \definecolor{fdu@cite}{HTML}{007F00}
    \hypersetup{
      colorlinks = true,
      linkcolor  = fdu@link,
      urlcolor   = fdu@url,
      citecolor  = fdu@cite,
    }
  \fi
  \urlstyle{tt}
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{è®¾å®šå…¶ä»–å®å’Œå¸¸é‡}
% è®¾å®šå„ç±»å›¾è¡¨çš„ä¸­æ–‡æ ‡é¢˜ï¼Œä»¥åŠæ ¡å¾½æ–‡ä»¶ç¼ºå¤±æ—¶æ˜¾ç¤ºåœ¨è®ºæ–‡ä¸­çš„ç¼ºçœæŠ¥é”™ä¿¡æ¯ï¼š
%    \begin{macrocode}
%<*cls>
\def\@title{\sht@title}
\def\@author{\sht@author}
\def\contentsname{ç›®\hspace{1\ccwd}å½•}
\def\listfigurename{å›¾å½¢åˆ—è¡¨}
\def\listtablename{è¡¨æ ¼åˆ—è¡¨}
\def\appendixname{é™„å½•}
\def\indexname{ç´¢å¼•}
\def\refname{å‚è€ƒæ–‡çŒ®}
\def\bibname{å‚è€ƒæ–‡çŒ®}
\def\tablename{è¡¨}
\def\figurename{å›¾}
\def\school@logo@missing{%
  æ ¡å¾½æ–‡ä»¶ç¼ºå¤±ï¼Œè¯·è‡³\href{https://github.com/lirundong/shtthesis/raw/master/%
  shanghaitech-emblem.pdf}{é¡¹ç›®ä¸»é¡µ}ä¸‹è½½ï¼%
}
%</cls>
%    \end{macrocode}
% \begin{macro}{ShtRed}
% é¢œè‰²å®šä¹‰ï¼šä¸Šç§‘å¤§çº¢
%    \begin{macrocode}
%<cls>\definecolor{ShtRed}{RGB}{146,46,23}
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\sht@flat@title}
% \begin{macro}{\sht@flat@title@en}
% å®šä¹‰ä¸åŒ…å«æ¢è¡Œç¬¦çš„ä¸­è‹±æ–‡æ ‡é¢˜ã€‚ä¹‹åä¼šåœ¨æœ¬ç§‘ç”Ÿè®ºæ–‡æ‘˜è¦ã€é¡µçœ‰è¢«ä½¿ç”¨ã€‚
%    \begin{macrocode}
%<*cls>
\def\sht@flat@title{\renewcommand\\{\space} \sht@title}
\def\sht@flat@title@en{\renewcommand\\{\space} \sht@title@en}
%</cls>
%    \end{macrocode}
% \end{macro}
% \end{macro}
%
% \subsection{é¡µé¢ã€é¡µçœ‰åŠé¡µè„šè®¾ç½®}
% ä½¿ç”¨ \textsf{geometry} åŠ \textsf{fancyhdr} è®¾å®šé¡µé¢æ’ç‰ˆã€‚æœ¬ç§‘ç”Ÿé¡µçœ‰çš„æ ¡å¾½å°ºå¯¸ï¼ˆé«˜ $1.17$ å˜ç±³ï¼‰ä»æ•™åŠ¡å¤„ Word æ¨¡æ¿æµ‹é‡å¾—åˆ°ã€‚
% \subsubsection{é¡µé¢å°ºå¯¸åŠè¾¹è·}
% A4 çº¸åŒé¢æ’ç‰ˆï¼Œæ‰“å°ç‰ˆå¢åŠ  $0.63$ å˜ç±³è£…è®¢å®½åº¦ã€‚æœ¬ç§‘ç”Ÿ 1.5 å€è¡Œè·ï¼Œç ”ç©¶ç”Ÿè®ºæ–‡åŒå€è¡Œè·ã€‚
%    \begin{macrocode}
%<*cls>
\def\binding@width{0.63cm}
\def\horizontal@margin{3.17cm}
\def\sht@head@logo@height{1.17cm}
\geometry{
  a4paper,
  twoside, 
}
\ifsht@print
  \geometry{
    inner = \horizontal@margin + \binding@width,
    outer = \horizontal@margin - \binding@width,
  }
\else
  \geometry{
    inner = \horizontal@margin,
    outer = \horizontal@margin,
  }
\fi
\ifsht@undergraduate
  \linespread{1.3}
  \geometry{
    includeheadfoot,
    top        = 1.5cm,
    bottom     = 1.75cm,
    headheight = \sht@head@logo@height,
    headsep    = \baselineskip,
    footskip   = 2.54cm - 1.75cm,
  }
\else
  \linespread{1.6}
  \geometry{
    top        = 2.54cm,
    bottom     = 2.54cm,
    headheight = 12pt,
    headsep    = 17.5pt,
    footskip   = 2.54cm - 1.75cm,
  }
\fi
\raggedbottom
\setlength{\parskip}{0.5ex plus 0.25ex minus 0.25ex}
\setlength{\parindent}{2\ccwd}
%</cls>
%    \end{macrocode}
%
% \subsubsection{é¡µçœ‰é¡µè„š}
% \begin{macro}{\sht@head@logo}
% ç”¨äºåœ¨æœ¬ç§‘ç”Ÿè®ºæ–‡é¡µçœ‰å·¦ä¾§ç»˜åˆ¶æ ¡å¾½ã€‚è‹¥æ ¡å¾½æ–‡ä»¶ç¼ºå¤±ï¼Œåˆ™æ˜¾ç¤ºç¼ºçœæŠ¥é”™ä¿¡æ¯ã€‚
%    \begin{macrocode}
%<*cls>
\newcommand\sht@head@logo{%
  \IfFileExists{shanghaitech-emblem.pdf}{%
    \includegraphics[height=\sht@head@logo@height]{shanghaitech-emblem.pdf}%
  }{%
    \fbox{%
      \begin{minipage}[b][\sht@head@logo@height][c]{0.4\columnwidth}%
        \zihao{-5}\bfseries\sffamily\color{ShtRed} \school@logo@missing%
      \end{minipage}%
    }%
  }
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% å¯ç”¨ \textsf{fancyhdr} æä¾›çš„é¡µé¢æ ¼å¼ï¼š
%    \begin{macrocode}
%<*cls>
\pagestyle{fancy}
%</cls>
%    \end{macrocode}
%
% \begin{macro}{Plain}
% ä¸æ˜¾ç¤ºé¡µçœ‰é¡µè„šï¼š
%    \begin{macrocode}
%<*cls>
\fancypagestyle{Plain}{}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{RomanNumbered}
% ç ”ç©¶ç”Ÿå‰è¨€é¡µæ ¼å¼ï¼š
%    \begin{macrocode}
%<*cls>
\fancypagestyle{RomanNumbered}{
  \fancyhf{}
  \pagenumbering{Roman}
  \fancyhead[OC]{\footnotesize\nouppercase\leftmark}
  \fancyhead[EC]{\footnotesize\nouppercase\sht@flat@title}
  \fancyfoot[C]{\footnotesize\thepage}
  \renewcommand{\headrulewidth}{0.8pt}
  \renewcommand{\footrulewidth}{0pt}
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{LRNumbered}
% ç ”ç©¶ç”Ÿæ­£æ–‡é¡µæ ¼å¼ï¼š
%    \begin{macrocode}
%<*cls>
\fancypagestyle{LRNumbered}{
  \fancyhf{}
  \fancyhead[OC]{\footnotesize\nouppercase\leftmark}
  \fancyhead[EC]{\footnotesize\nouppercase\sht@flat@title}
  \fancyfoot[OR]{\footnotesize\thepage}
  \fancyfoot[EL]{\footnotesize\thepage}
  \renewcommand{\headrulewidth}{0.8pt}
  \renewcommand{\footrulewidth}{0pt}
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{LRNumberedAppendix}
% ç ”ç©¶ç”Ÿé™„å½•é¡µæ ¼å¼ï¼š
%    \begin{macrocode}
%<*cls>
\fancypagestyle{LRNumberedAppendix}{
  \fancyhf{}
  \fancyhead[OC]{\footnotesize é™„\hspace*{1\ccwd}å½•}
  \fancyhead[EC]{\footnotesize\nouppercase\sht@flat@title}
  \fancyfoot[OR]{\footnotesize\thepage}
  \fancyfoot[EL]{\footnotesize\thepage}
  \renewcommand{\headrulewidth}{0.8pt}
  \renewcommand{\footrulewidth}{0pt}
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{RomanNumberedWithLogo}
% æœ¬ç§‘ç”Ÿå‰è¨€é¡µæ ¼å¼ï¼š
%    \begin{macrocode}
%<*cls>
\fancypagestyle{RomanNumberedWithLogo}{
  \fancyhf{}
  \pagenumbering{Roman}
  \fancyhead[L]{\sht@head@logo}
  \fancyhead[R]{\zihao{-5}\sffamily\sht@flat@title}
  \fancyfoot[C]{\footnotesize\thepage}
  \renewcommand{\headrulewidth}{0.8pt}
  \renewcommand{\footrulewidth}{0pt}
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{MNNumberedWithLogo}
% æœ¬ç§‘ç”Ÿæ­£æ–‡é¡µæ ¼å¼ã€‚é¡µç æ ¼å¼ä¸ºâ€œç¬¬~m~é¡µ\hspace*{1\ccwd}å…±~n~é¡µâ€ï¼Œå…¶ä¸­ n æ¥è‡ª \textsf{pageslts} å®åŒ…æä¾›çš„ |VeryLastPage|ï¼Œä»¥ç¡®ä¿ä½¿ç”¨ |\cleardoublepage| åæ€»é¡µç æ•°ä»ç„¶æ­£ç¡®ï¼š
%    \begin{macrocode}
%<*cls>
\fancypagestyle{MNNumberedWithLogo}{
  \fancyhf{}
  \fancyhead[L]{\sht@head@logo}
  \fancyhead[R]{\zihao{-5}\sffamily\sht@flat@title}
  \fancyfoot[C]{%
    \footnotesize%
    ç¬¬~\thepage~é¡µ\hspace*{1\ccwd}å…±~\lastpageref*{VeryLastPage}~é¡µ%
  }
  \renewcommand{\headrulewidth}{0.8pt}
  \renewcommand{\footrulewidth}{0pt}
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \subsubsection{æ–‡æ¡£ç»“æ„åˆ‡æ¢å¼€å…³}
%
% \begin{macro}{\frontmatter}
% æ ¹æ®æœ¬ç§‘ç”Ÿ/ç ”ç©¶ç”Ÿè®ºæ–‡æ ¼å¼ï¼Œé‡æ–°å®šä¹‰å‰è¨€é¡µé¢å¼€å…³ï¼š
%    \begin{macrocode}
%<*cls>
\providecommand{\frontmatter}{}
\LetLtxMacro{\sht@tmp@frontmatter}{\frontmatter}
\renewcommand{\frontmatter}{%
  \sht@tmp@frontmatter%
  \ifsht@undergraduate%
    \pagestyle{RomanNumberedWithLogo}%
  \else%
    \pagestyle{RomanNumbered}%
  \fi%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\mainmatter}
% é‡æ–°å®šä¹‰æ­£æ–‡é¡µé¢å¼€å…³ï¼Œå¹¶é‡è®¾é¡µç è®¡æ•°è‡³ 1ï¼š
%    \begin{macrocode}
%<*cls>
\providecommand{\mainmatter}{}
\LetLtxMacro{\sht@tmp@mainmatter}{\mainmatter}
\renewcommand{\mainmatter}{%
  \sht@tmp@mainmatter%
  \ifsht@undergraduate%
    \pagestyle{MNNumberedWithLogo}%
  \else%
    \pagestyle{LRNumbered}%
  \fi%
  \pagenumbering{arabic}%
  \setcounter{page}{1}%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% åœ¨æ–‡æ¡£å¼€å§‹æ—¶æ˜¾å¼è®¾ç½®é¡µç è®¡æ•°ï¼Œä»¥ç¡®ä¿ \textsf{pageslts} æ­£å¸¸å·¥ä½œã€‚
%    \begin{macrocode}
%<*cls>
\AtBeginDocument{%
  \pagenumbering{arabic}%
}
%</cls>
%    \end{macrocode}
%
% \subsection{å­—ä½“è®¾ç½®}
%
% \shtthesis{} åŸºæœ¬æ²¿ç”¨äº† \textsf{ctex} å®åŒ…çš„å­—ä½“é€‰æ‹©æ–¹å¼ï¼Œå¹¶é‡æ–°å®ç°äº† Linux/UNIX ä¸‹çš„å­—ä½“é€‰æ‹©ä¸å›é€€æœºåˆ¶ã€‚
% \begin{macro}{\sht@fontset}
% \textsf{ctex} å†…éƒ¨é€‰æ‹©çš„å­—ä½“é›†ï¼Œä»¥æ­¤åˆ¤æ–­ç¼–è¯‘ç³»ç»Ÿã€‚
%    \begin{macrocode}
%<*cls>
\newcommand\sht@fontset{\csname g__ctex_fontset_tl\endcsname}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \subsubsection{è‹±æ–‡å­—ä½“è®¾ç½®}
% å…¨å¹³å°ä¸€è‡´ï¼Œä½¿ç”¨ \TeX{} Gyre ç³»åˆ—å­—ä½“ã€‚
%    \begin{macrocode}
%<*cls>
\setmainfont{texgyretermes} [
  Extension      = .otf,
  UprightFont    = *-regular,
  BoldFont       = *-bold,
  ItalicFont     = *-italic,
  BoldItalicFont = *-bolditalic,
  Ligatures      = TeX,
]
\setsansfont{texgyreheros} [
  Extension      = .otf,
  UprightFont    = *-regular,
  BoldFont       = *-bold,
  ItalicFont     = *-italic,
  BoldItalicFont = *-bolditalic,
  Ligatures      = TeX,
]
\setmonofont{texgyrecursor} [
  Extension      = .otf,
  UprightFont    = *-regular,
  BoldFont       = *-bold,
  ItalicFont     = *-italic,
  BoldItalicFont = *-bolditalic,
  Ligatures      = CommonOff,
]
%</cls>
%    \end{macrocode}
%
% \subsubsection{ä¸­æ–‡å­—ä½“è®¾ç½®}
% Windows ç¯å¢ƒä¸‹ä½¿ç”¨ä¸­æ˜“å­—åº“å’Œä¼ªç²—ï¼ˆauto fakeboldï¼‰ï¼Œä¸å¤Ÿä¼˜é›…ä½†æ˜¯æ²¡åŠæ³•â€¦â€¦
%    \begin{macrocode}
%<*cls>
\ifthenelse{\equal{\sht@fontset}{windows}}{
  \def\fake@bold@factor{2.5}
  \setCJKmainfont{SimSun}[
    AutoFakeBold = \fake@bold@factor,
      ItalicFont = KaiTi,
  ]
  \setCJKsansfont{SimHei}[
    AutoFakeBold = \fake@bold@factor,
  ]
  \setCJKfamilyfont{zhsong}{SimSun}[
    AutoFakeBold = \fake@bold@factor,
  ]
  \setCJKfamilyfont{zhhei}{SimHei}[
    AutoFakeBold = \fake@bold@factor,
  ]
  \setCJKfamilyfont{zhkai}{KaiTi}[
    AutoFakeBold = \fake@bold@factor,
  ]
}{
%</cls>
%    \end{macrocode}
%
% macOS ç¯å¢ƒä¸‹ä½¿ç”¨å¤šå­—é‡åæ–‡å­—åº“ã€‚æ³¨æ„å¸¸è§„å­—é‡æ¥·ä½“å¿…é¡»ä½¿ç”¨å…¨åâ€œKaiti SC Regularâ€ï¼Œå¦åˆ™ \hologo{XeLaTeX} å¼•æ“å¯èƒ½ä¼šæ‰¾ä¸åˆ°å­—ä½“ã€‚
%    \begin{macrocode}
%<*cls>
  \ifthenelse{\equal{\sht@fontset}{mac}}{
    \setCJKmainfont{Songti SC}[
         UprightFont = * Light,
            BoldFont = * Bold,
          ItalicFont = Kaiti SC Regular,
      BoldItalicFont = Kaiti SC Bold,
    ]
    \setCJKsansfont{Heiti SC}[
      UprightFont = * Light,
         BoldFont = * Medium,
    ]
    \setCJKfamilyfont{zhsong}{Songti SC}[
      UprightFont = * Light,
         BoldFont = * Bold,
    ]
    \setCJKfamilyfont{zhhei}{Heiti SC}[
      UprightFont = * Light,
         BoldFont = * Medium,
    ]
    \setCJKfamilyfont{zhkai}{Kaiti SC}[
      UprightFont = * Regular,
         BoldFont = * Bold,
    ]
  }{
%</cls>
%    \end{macrocode}
%
% Linux/UNIX ç¯å¢ƒä¸‹çš„ä¸­æ–‡å­—ä½“é€‰æ‹©é€»è¾‘æ¯”è¾ƒç¹çï¼Œä¸»è¦åŸå› æ˜¯ \hologo{XeTeX} å¼•æ“æ— æ³•ä½¿ç”¨å­—ä½“åç§°ï¼ˆfamily name æˆ– full nameï¼‰è°ƒç”¨ \TeX{} Live å†…ç½®å­—ä½“ã€‚ç›®å‰ï¼ˆ\fileversionï¼‰çš„ä¸­æ–‡å­—ä½“è®¾ç½®æµç¨‹ä¸ºï¼š
% \begin{enumerate}
% \item æ£€æµ‹æ€æºå®‹ä½“ã€é»‘ä½“æ˜¯å¦å®‰è£…ï¼Œè‹¥æœªæ£€æµ‹åˆ°åˆ™ä½¿ç”¨ Fandol å®‹ä½“ã€é»‘ä½“ï¼›
%   \begin{enumerate}
%   \item æ£€æµ‹ Light å’Œ Medium å­—é‡å®‹ä½“ã€é»‘ä½“æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨åˆ™è®°å½•å…¶å­—ä½“å…¨åï¼›
%   \item è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ Regular å’Œ Bold å­—é‡ï¼Œè®°å½•å­—ä½“å…¨åï¼›
%   \end{enumerate}
% \item æ£€æµ‹æ–¹æ­£æ¥·ä½“ã€ä»¿å®‹æ˜¯å¦å®‰è£…ï¼Œè‹¥æœªæ£€æµ‹åˆ°åˆ™ä½¿ç”¨ Fandol æ¥·ä½“ã€ä»¿å®‹ï¼›
% \item è‹¥ç¼–è¯‘å¼•æ“ä¸º \hologo{LuaTeX}ï¼Œåˆ™ä½¿ç”¨åŒ…å«å­—é‡çš„å­—ä½“å…¨åï¼ˆfull nameï¼‰è®¾å®šå­—ä½“ï¼Œå®Œæˆè®¾ç½®ï¼›
% \item è‹¥ç¼–è¯‘å¼•æ“ä¸º \hologo{XeTeX} ï¼Œæœ‰å¯èƒ½éœ€è¦ä½¿ç”¨å­—ä½“æ–‡ä»¶åï¼ˆfont file pathï¼‰è°ƒç”¨å­—ä½“ã€‚æ ¹æ®å®‹ä½“ã€é»‘ä½“çš„å­—ä½“å…¨åï¼š
%   \begin{enumerate}
%   \item è‹¥ä½¿ç”¨ Fandol å®‹ä½“ã€é»‘ä½“ï¼Œåˆ™å¼ºåˆ¶ä½¿ç”¨ Fandol æ¥·ä½“ã€ä»¿å®‹ã€‚æŒ‰ç…§ Fandol åœ¨ \TeX{} Live å†…çš„æ–‡ä»¶åè®¾å®šå­—ä½“ï¼Œå®Œæˆè®¾ç½®ï¼›
%   \item è‹¥ä½¿ç”¨æ€æºå®‹ä½“ã€é»‘ä½“ï¼š
%     \begin{enumerate}
%     \item è‹¥ä½¿ç”¨ Fandol æ¥·ä½“ã€ä»¿å®‹ï¼Œåˆ™æŒ‰ç…§å­—ä½“å…¨åæŒ‡å®šå®‹ä½“ã€é»‘ä½“ï¼ŒæŒ‰ç…§æ–‡ä»¶åæŒ‡å®šæ¥·ä½“ã€ä»¿å®‹ï¼Œå®Œæˆè®¾ç½®ï¼›
%     \item è‹¥ä½¿ç”¨æ–¹æ­£æ¥·ä½“ã€ä»¿å®‹ï¼Œåˆ™æŒ‰ç…§å­—ä½“å…¨åæŒ‡å®šæ‰€æœ‰å­—ä½“ï¼Œå®Œæˆè®¾ç½®ï¼›
%     \end{enumerate}
%   \end{enumerate}
% \end{enumerate}
%    \begin{macrocode}
%<*cls>
    \IfFontExistsTF{Noto Serif CJK SC}{
      \def\unix@songti{Noto Serif CJK SC}
    }{
      \IfFontExistsTF{Source Han Serif SC}{
        \def\unix@songti{Source Han Serif SC}
      }{
        \def\unix@songti{FandolSong}
      }
    }
    \IfFontExistsTF{\unix@songti\space Light}{
      \edef\unix@songti@upright{\unix@songti\space Light}
      \edef\unix@songti@bold{\unix@songti\space Medium}
    }{
      \edef\unix@songti@upright{\unix@songti}
      \edef\unix@songti@bold{\unix@songti\space Bold}
    }
    \IfFontExistsTF{Noto Sans CJK SC}{
      \def\unix@heiti{Noto Sans CJK SC}
    }{
      \IfFontExistsTF{Source Han Sans SC}{
        \def\unix@heiti{Source Han Sans SC}
      }{
        \def\unix@heiti{FandolHei}
      }
    }
    \IfFontExistsTF{\unix@heiti\space Medium}{
      \edef\unix@heiti@bold{\unix@heiti\space Medium}
    }{
      \edef\unix@heiti@bold{\unix@heiti\space Bold}
    }
    \IfFontExistsTF{FZKai-Z03}{
      \def\unix@kaiti{FZKai-Z03}
    }{
      \def\unix@kaiti{FandolKai}
    }
    \IfFontExistsTF{FZFangSong-Z02}{
      \def\unix@fangsong{FZFangSong-Z02}
    }{
      \def\unix@fangsong{FandolFang}
    }
    \ifluatex
      \setCJKmainfont{\unix@songti@upright}[
          BoldFont = \unix@songti@bold,
        ItalicFont = \unix@kaiti,
      ]
      \setCJKsansfont{\unix@heiti}[BoldFont=\unix@heiti@bold]
      \setCJKmonofont{\unix@fangsong}
      \setCJKfamilyfont{zhsong}{\unix@songti@upright}[
        BoldFont = \unix@songti@bold,
      ]
      \setCJKfamilyfont{zhhei}{\unix@heiti}[BoldFont=\unix@heiti@bold]
      \setCJKfamilyfont{zhkai}{\unix@kaiti}
      \setCJKfamilyfont{zhfs}{\unix@fangsong}
    \else
      \ifthenelse{\equal{\unix@songti}{FandolSong}}{
        \setCJKmainfont{FandolSong}[
          Extension   = .otf,
          UprightFont = *-Regular,
          BoldFont    = *-Bold,
          ItalicFont  = FandolKai-Regular,
        ]
        \setCJKfamilyfont{zhsong}{FandolSong}[
          Extension   = .otf,
          UprightFont = *-Regular,
          BoldFont    = *-Bold,
        ]
      }{
        \ifthenelse{\equal{\unix@kaiti}{FandolKai}}{
          \setCJKmainfont{\unix@songti@upright}[
                  BoldFont = \unix@songti@bold,
               ItalicFont  = FandolKai-Regular,
            ItalicFeatures = {Extension = .otf},
          ]
        }{
          \setCJKmainfont{\unix@songti@upright}[
              BoldFont = \unix@songti@bold,
            ItalicFont = \unix@kaiti,
          ]
        }
        \setCJKfamilyfont{zhsong}{\unix@songti@upright}[
          BoldFont = \unix@songti@bold,
        ]
      }
      \ifthenelse{\equal{\unix@heiti}{FandolHei}}{
        \setCJKsansfont{FandolHei}[
          Extension   = .otf,
          UprightFont = *-Regular,
          BoldFont    = *-Bold,
        ]
        \setCJKfamilyfont{zhhei}{FandolHei}[
          Extension   = .otf,
          UprightFont = *-Regular,
          BoldFont    = *-Bold,
        ]
      }{
        \setCJKsansfont{\unix@heiti}[BoldFont=\unix@heiti@bold]
        \setCJKfamilyfont{zhhei}{\unix@heiti}[BoldFont=\unix@heiti@bold]
      }
      \ifthenelse{\equal{\unix@kaiti}{FandolKai}}{
        \setCJKfamilyfont{zhkai}{FandolKai}[
          Extension   = .otf,
          UprightFont = *-Regular,
        ]
      }{
        \setCJKfamilyfont{zhkai}{\unix@kaiti}
      }
      \ifthenelse{\equal{\unix@fangsong}{FandolFang}}{
        \setCJKfamilyfont{zhfs}{FandolFang}[
          Extension   = .otf,
          UprightFont = *-Regular,
        ]
        \setCJKmonofont{FandolFang}[
          Extension   = .otf,
          UprightFont = *-Regular,
        ]
      }{
        \setCJKmonofont{\unix@fangsong}
        \setCJKfamilyfont{zhfs}{\unix@fangsong}
      }
    \fi
    \providecommand{\songti}{\CJKfamily{zhsong}}
    \providecommand{\heiti}{\CJKfamily{zhhei}}
    \providecommand{\kaishu}{\CJKfamily{zhkai}}
    \providecommand{\fangsong}{\CJKfamily{zhfs}}
  }
}
%</cls>
%    \end{macrocode}
%
% \subsection{æ•°å­¦ç¯å¢ƒè®¾ç½®}
% è°ƒæ•´æ•°å­¦ç¯å¢ƒæ’ç‰ˆï¼Œä½¿å…¶å°½å¯èƒ½ç¬¦åˆ \href{https://zh.m.wikisource.org/zh-hans/GB_3102.11_ç‰©ç†ç§‘å­¦å’ŒæŠ€æœ¯ä¸­ä½¿ç”¨çš„æ•°å­¦ç¬¦å·}{ã€ŠGB 3102.11 ç‰©ç†ç§‘å­¦å’ŒæŠ€æœ¯ä¸­ä½¿ç”¨çš„æ•°å­¦ç¬¦å·ã€‹}è¦æ±‚ã€‚æ­¤å¤„å‚è€ƒäº† \href{https://github.com/tuna/thuthesis/blob/17acabec987947768e35f0693c678ce654020bc2/thuthesis.dtx#L2452-L2520}{thuthesis} çš„å®ç°ã€‚
%
% \subsubsection{æ•°å­¦ç¬¦å·}
% ä½¿ç”¨æ–œä½“ï¼ˆitalicï¼‰æ‹‰ä¸ç¬¦å·å’Œå¸Œè…Šç¬¦å·ã€‚ä½¿ç”¨ç›´ç«‹ï¼ˆuprightï¼‰çš„ $âˆ‡$ å’Œ $âˆ‚$ï¼Œè€Œéå…¶æ–œä½“ï¼ˆitalicï¼‰ç‰ˆæœ¬ï¼ˆ$ğ›»$ å’Œ $ğœ•$ï¼‰ï¼š
%    \begin{macrocode}
%<*cls>
\unimathsetup{
  math-style = ISO,
  bold-style = ISO,
  nabla      = upright,
  partial    = upright,
}
%</cls>
%    \end{macrocode}
% ä½¿ç”¨ $â©½$ å’Œ $â©¾$ï¼Œè€Œé $â‰¤$ å’Œ $â‰¥$ï¼š
%    \begin{macrocode}
%<*cls>
\protected\def\le{\leqslant}
\protected\def\ge{\geqslant}
\AtBeginDocument{%
  \renewcommand\leq{\leqslant}%
  \renewcommand\geq{\geqslant}%
}
%</cls>
%    \end{macrocode}
% ä½¿ç§¯åˆ†ä¸Šä¸‹é™ç½®äºç§¯åˆ†ç¬¦å·æ­£ä¸Šæ–¹å’Œæ­£ä¸‹æ–¹ï¼š
%    \begin{macrocode}
%<*cls>
\removenolimits{%
  \int\iint\iiint\iiiint\oint\oiint\oiiint
  \intclockwise\varointclockwise\ointctrclockwise\sumint
  \intbar\intBar\fint\cirfnint\awint\rppolint
  \scpolint\npolint\pointint\sqint\intlarhk\intx
  \intcap\intcup\upint\lowint
}
%</cls>
%    \end{macrocode}
% ä½¿ç”¨æ­£ä½“ï¼ˆuprightï¼Œä¾‹å¦‚ $\symup{Re}$ï¼‰è€Œéå“¥ç‰¹ä½“ï¼ˆfrakturï¼Œä¾‹å¦‚ $\symfrak{Re}$ï¼‰è¡¨ç¤ºå®éƒ¨å’Œè™šéƒ¨ï¼š
%    \begin{macrocode}
%<*cls>
\AtBeginDocument{%
  \renewcommand{\Re}{\operatorname{Re}}%
  \renewcommand{\Im}{\operatorname{Im}}%
}
%</cls>
%    \end{macrocode}
% å…¼å®¹æ—§å¼çš„ç¬¦å·åŠ ç²—å‘½ä»¤ |\bm|ã€|\boldsymbol| å’Œæ–¹å—å‘½ä»¤ |\square|ï¼Œå¹¶èƒ½å¤Ÿåœ¨æ–‡æœ¬æ¨¡å¼ä¸­ä½¿ç”¨ |\checkmark|ï¼š
%    \begin{macrocode}
%<*cls>
\newcommand\bm{\symbf}
\renewcommand\boldsymbol{\symbf}
\newcommand\square{\mdlgwhtsquare}
\AtBeginDocument{%
  \renewcommand\checkmark{\ensuremath{âœ“}}%
}
%</cls>
%    \end{macrocode}
% å…è®¸å…¬å¼æ–­è¡Œï¼š
%    \begin{macrocode}
%<*cls>
\allowdisplaybreaks[4]
%</cls>
%    \end{macrocode}
% æœ€åï¼Œé‡è½½ç ”ç©¶ç”Ÿè®ºæ–‡çš„å…¬å¼ç¼–å·æ ¼å¼ï¼ŒåŠå…¶ |\eqref| å®ç°ï¼š
%    \begin{macrocode}
%<*cls>
\ifsht@graduate
  \newtagform{dots}{\ldots\ (}{)}
  \usetagform{dots}
  \renewcommand{\eqref}[1]{\textup{(\ref{#1})}}
\fi
%</cls>
%    \end{macrocode}
%
% \subsubsection{æ•°å­¦å­—ä½“}
% ä½¿ç”¨ STIX Two Math å­—ä½“ï¼Œä½¿ç”¨ç›´ç«‹çš„ç§¯åˆ†ç¬¦å·ï¼Œå¹¶èƒ½å¤ŸåŒºåˆ† |\symcal| å’Œ |\symscr| ä¸¤ç§æ‰‹å†™ä½“ã€‚å…³äº stylistic set çš„è®¾ç½®å’Œé€‰æ‹©ï¼Œè¯·å‚è€ƒ \textsf{unicode-math} æ–‡æ¡£çš„â€œCaligraphic vs. Script variantsâ€ä¸€èŠ‚ï¼ŒåŠ \textsf{stix2-otf} æ–‡æ¡£ã€‚
%    \begin{macrocode}
%<*cls>
\def\sht@math@font{STIX2Math.otf}
\setmathfont{\sht@math@font}[StylisticSet=8]
\setmathfont{\sht@math@font}[
  range        = {scr, bfscr},
  StylisticSet = 1,
]
%</cls>
%    \end{macrocode}
%
% \subsubsection{ç¼–å·å®šç†ç¯å¢ƒ}
% ç¼–å·æ¨¡å¼åŠæ’ç‰ˆæ ¼å¼å¯¹é½ \textsf{amsthm}ï¼Œå¹¶åœ¨å•ç‹¬çš„ group å†…å®šä¹‰ï¼Œä»¥ä¾¿ç”¨æˆ·ä»¥é»˜è®¤æ ¼å¼è‡ªå®šä¹‰å…¶ä»–å®šç†ç¯å¢ƒã€‚ï¼ˆä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ \textsf{amsthm}ï¼Ÿå› ä¸ºè®© \textsf{amsthm} åŒ¹é…ä¸­æ–‡æ’ç‰ˆéœ€è¦å¾ˆä¸é²æ£’çš„ dirty hackï¼Œè­¬å¦‚ patch commandâ€¦â€¦ï¼‰
%    \begin{macrocode}
%<*cls>
\begingroup
\theoremstyle{plain}
\theoremseparator{.}
\newtheorem{theorem}{å®šç†}[chapter]
\newtheorem{lemma}{å¼•ç†}[chapter]
\newtheorem{corollary}{æ¨è®º}[theorem]
\newtheorem{proposition}{å‘½é¢˜}[chapter]
\newtheorem{conjecture}{çŒœæƒ³}[chapter]
\theorembodyfont{\upshape}
\newtheorem{definition}{å®šä¹‰}[chapter]
\newtheorem{axiom}{å…¬ç†}[chapter]
\newtheorem{example}{ä¾‹}[chapter]
\newtheorem{exercise}{ç»ƒä¹ }[chapter]
\newtheorem{problem}{é—®é¢˜}[chapter]
\theoremheaderfont{\kaishu}
\newtheorem{remark}{æ³¨}[chapter]
\theoremstyle{nonumberplain}
\theoremheaderfont{\itshape}
\theoremseparator{ï¼š\hspace*{-0.5\ccwd}}
\theoremsymbol{\ensuremath{\QED}}
\newtheorem{proof}{è¯æ˜}
\endgroup
%</cls>
%    \end{macrocode}
%
% \subsection{ç›®å½•åŠå›¾è¡¨åˆ—è¡¨}
% ä»¥ä¸‹ä»£ç æ”¹ç¼–è‡ª \href{https://github.com/mohuangrui/ucasthesis}{ucasthesis}ï¼Œç”¨äºç”Ÿæˆç›®å½•å’Œå›¾è¡¨åˆ—è¡¨ï¼Œæ„Ÿè°¢è«æ™ƒé”çš„å·¥ä½œã€‚ç›®å‰çš„å®ç°å¯è¯»æ€§è¾ƒä½ï¼Œæ˜¯é‡æ„ä¼˜å…ˆçº§æœ€é«˜çš„ä»£ç ã€‚åœ¨é‡æ„å®Œæˆå‰ä¸ä¼šåŠ å…¥æ³¨é‡Šã€‚
%    \begin{macrocode}
%<*cls>
\newcommand{\artxmaincnt}{%
  \ifcsname c@chapter\endcsname%
    chapter%
  \else%
    section%
  \fi%
}
\long\def\artxaux#1{}
\newcommand{\intotocnostar}[3]{%
  #1#2{%
    \phantomsection%
    \addcontentsline{toc}{\expandafter\artxaux\string#1}{#3}%
    #3%
  }
  \markboth{\MakeUppercase{#3}}{}%
}
\newcommand{\intotocstar}[3][\artxmaincnt]{%
  #2%
  \phantomsection%
  \addcontentsline{toc}{#1}{#3}%
  \markboth{\MakeUppercase{#3}}{}%
}
\newcommand{\intotoc}{\@ifstar{\intotocstar}{\intotocnostar}}
\newcommand{\intobmknostar}[4][0]{%
  #2#3{%
    \phantomsection%
    \Hy@writebookmark%
    {}%
    {#4}%
    {\@currentHref}%
    {#1}%
    {toc}%
    #4%
  }%
  \markboth{\MakeUppercase{#4}}{}%
}
\newcommand{\intobmkstar}[3][0]{%
  #2%
  \phantomsection%
  \Hy@writebookmark%
  {}%
  {#3}%
  {\@currentHref}%
  {#1}%
  {toc}%
  \markboth{\MakeUppercase{#3}}{}%
}
\newcommand{\intobmk}{\@ifstar{\intobmkstar}{\intobmknostar}}
\LetLtxMacro{\OriginCleardoublepage}{\cleardoublepage}
\renewcommand{\cleardoublepage}{%
  \ifthenelse{\boolean{sht@undergraduate} \AND \NOT\boolean{sht@print}}{%
    \relax\clearpage%
  }{%
    \OriginCleardoublepage%
  }%
}
\DeclareCaptionFont{wuhaocuti}{\zihao{5}\bfseries}
\captionsetup{
  format = plain,
  hangindent = 2.0em,
  labelsep = quad,
  font = {wuhaocuti},
}
\ifsht@undergraduate
  \captionsetup{
    skip = 6pt,
  }
  \def\sht@toc@chapter@fmt{\zihao{5}\rmfamily}
  \def\sht@toc@section@fmt{\zihao{5}\rmfamily}
\else
  \captionsetup{
    skip = 8pt,
  }
  \def\sht@toc@chapter@fmt{\zihao{4}\heiti}
  \def\sht@toc@section@fmt{\zihao{-4}\heiti}
\fi
\def\@dotsep{1.5mu}
\def\@pnumwidth{2em}
\def\@tocrmarg{2em}
\def\@chaptervspace{1ex}
\renewcommand*{\@dottedtocline}[5]{
  \ifnum #1>\c@tocdepth \else
    \vskip \z@ \@plus.2\p@
    {\leftskip #2\relax \rightskip \@tocrmarg \parfillskip -\rightskip
    \parindent #2\relax\@afterindenttrue
    \interlinepenalty\@M
    \leavevmode \sht@toc@section@fmt
    \@tempdima #3\relax
    \advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
    {#4}\nobreak
    \leaders\hbox{$\m@th\mkern \@dotsep \cdot\mkern \@dotsep$}\hfill
    \nobreak
    \hb@xt@\@pnumwidth{\hfil\normalfont \normalcolor #5}%
    \par\penalty\@highpenalty}%
  \fi
}
\renewcommand*{\l@part}[2]{
  \ifnum \c@tocdepth >-2\relax
    \addpenalty{-\@highpenalty}%
    \addvspace{2.25em \@plus\p@}%
    \setlength\@tempdima{3em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      {\leavevmode
      \sht@toc@chapter@fmt #1
      \leaders\hbox{$\m@th\mkern \@dotsep \cdot\mkern \@dotsep$}
      \hfil \hb@xt@\@pnumwidth{\hss #2}}\par
      \nobreak
      \global\@nobreaktrue
      \everypar{\global\@nobreakfalse\everypar{}}%
    \endgroup
  \fi
}
\renewcommand*{\l@chapter}[2]{
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}%
    \ifsht@undergraduate%
    \else%
      \vskip \@chaptervspace \@plus\p@%
    \fi%
    \setlength\@tempdima{1.5em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode \sht@toc@chapter@fmt
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      #1\nobreak
      \leaders\hbox{$\m@th\mkern \@dotsep \cdot\mkern \@dotsep$}
      \hfil \nobreak\hb@xt@\@pnumwidth{\hss #2}\par
      \penalty\@highpenalty
    \endgroup
  \fi
}
\renewcommand*\l@section{\@dottedtocline{1}{1em}{1.8em}}
\renewcommand*\l@subsection{\@dottedtocline{2}{2em}{2.8em}}
\renewcommand*\l@subsubsection{\@dottedtocline{3}{3em}{3.8em}}
\renewcommand*\l@paragraph{\@dottedtocline{4}{4em}{4.8em}}
\renewcommand*\l@subparagraph{\@dottedtocline{5}{5em}{5.8em}}
\renewcommand*\l@figure{\@dottedtocline{1}{1em}{1.8em}}
\renewcommand*\l@table{\@dottedtocline{1}{1em}{1.8em}}
\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{3}
%</cls>
%    \end{macrocode}
% \begin{macro}{\makeindices}
% æ ¹æ®å­¦ä½ç±»å‹ï¼Œç”Ÿæˆä¸åŒæ ¼å¼çš„ç›®å½•åŠå›¾å½¢ã€è¡¨æ ¼åˆ—è¡¨ã€‚æ³¨æ„è¯¥å‘½ä»¤ä¸ç”Ÿæˆç¬¦å·åˆ—è¡¨ã€‚
%    \begin{macrocode}
%<*cls>
\newcommand{\makeindices}{%
  \begingroup%
  \linespread{1.2}%
  \hypersetup{linkcolor=black}%
  \intobmk*{\cleardoublepage}{\contentsname}%
  \tableofcontents%
  \ifsht@graduate%
    \intobmk*{\cleardoublepage}{\listfigurename}%
    \listoffigures%
    \intobmk*{\cleardoublepage}{\listtablename}%
    \listoftables%
  \fi%
  \endgroup%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \subsection{ç« èŠ‚æ ‡é¢˜æ ¼å¼}
% ä½¿ç”¨ \textsf{ctex} æä¾›çš„ |\ctexset| æ¥å£ï¼ŒæŒ‰ç…§ç ”ç©¶ç”Ÿã€æœ¬ç§‘ç”Ÿè®ºæ–‡ç±»å‹è®¾ç½®å„çº§æ ‡é¢˜æ ¼å¼ã€‚
%
% \subsubsection{ç ”ç©¶ç”Ÿç« èŠ‚æ ‡é¢˜}
% æ³¨æ„å­¦æ ¡è¦æ±‚åœ¨æ ‡é¢˜å†…ä½¿ç”¨ä¸­æ–‡é»‘ä½“+è¥¿æ–‡ Times New Roman çš„ç»„åˆï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨ |\sffamily| åˆ‡æ¢å­—ä½“ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ |\heiti| å®ç°ä¸Šè¿°è¦æ±‚ã€‚
%    \begin{macrocode}
%<*cls>
\ctexset {
  chapter = {
    format = \bfseries\heiti\zihao{4}\linespread{1.0}\centering,
    nameformat = {},
    numberformat = \rmfamily,
    titleformat = {},
    name = {ç¬¬, ç« },
    number = \arabic{chapter},
    aftername = \hspace{0.75\ccwd},
    beforeskip = {7pt},
    afterskip = {18pt},
    pagestyle = Plain,
  },
  section = {
    format = \heiti\normalsize\linespread{1.0}\raggedright,
    nameformat = {},
    numberformat = \rmfamily,
    titleformat = {},
    aftername = \hspace{0.75\ccwd},
    beforeskip = {24pt},
    afterskip = {6pt},
  },
  subsection = {
    format = \heiti\normalsize\linespread{1.0}\raggedright,
    nameformat = {},
    numberformat = \rmfamily,
    titleformat = {},
    aftername = \hspace{0.75\ccwd},
    beforeskip = {12pt},
    afterskip = {6pt},
  },
  paragraph = {
    indent = 2\ccwd,
    beforeskip = {0pt},
    afterskip = {0.75\ccwd},
  },
  punct = quanjiao,
  space = auto,
  autoindent = true,
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{æœ¬ç§‘ç”Ÿç« èŠ‚æ ‡é¢˜}
% æŒ‰ç…§å­¦æ ¡è¦æ±‚ï¼Œæœ¬ç§‘ç”Ÿè®ºæ–‡ç« èŠ‚æ ‡é¢˜éœ€ç¼©è¿› 2 ä¸ªä¸­æ–‡å­—ç¬¦ã€‚ç„¶è€Œä¸€äºŒçº§æ ‡é¢˜çš„å­—å·å’Œæ­£æ–‡å­—å·ç›¸å·®è¿‡å¤§ï¼ˆä¸€çº§æ ‡é¢˜ä¸‰å·å­—ï¼ŒäºŒçº§æ ‡é¢˜å››å·å­—ï¼Œæ­£æ–‡äº”å·å­—ï¼‰ï¼Œç›´æ¥æŒ‰ç…§æ ‡é¢˜å­—å·ç¼©è¿›ä¼šé€ æˆä¸¥é‡çš„è§†è§‰åŠ¨çº¿é”™ä½ã€‚å› æ­¤ä½œä¸ºæ ‡å‡†æ¡†æ¶å†…çš„è¡¥æ•‘æªæ–½ï¼Œä¸€äºŒçº§æ ‡é¢˜çš„ç¼©è¿›ä»¥ 2 ä¸ªäº”å·å­—å­—å®½ä¸ºå‡†ã€‚
%
% åœ¨æŒ‡å®š |comfort| é€‰é¡¹åï¼Œä¼šå‡å°‘å„çº§æ ‡é¢˜å’Œæ­£æ–‡é—´çš„å­—å·å·®è·ï¼ˆä¸€çº§æ ‡é¢˜å››å·å­—ï¼ŒäºŒçº§æ ‡é¢˜å°å››å·å­—ï¼Œæ­£æ–‡äº”å·å­—ï¼‰ï¼Œä¸”å„çº§æ ‡é¢˜ä¸å†ç¼©è¿›ï¼Œä»¥æé«˜é˜…è¯»çš„èˆ’é€‚æ€§ã€‚
%    \begin{macrocode}
%<*cls>
\ifsht@undergraduate
  \newlength{\sht@section@indent}
  \ifsht@comfort
    \def\sht@chapter@fmt{\bfseries\sffamily\zihao{4}\linespread{1.0}\centering}
    \def\sht@section@fmt{\sffamily\zihao{-4}\linespread{1.0}\raggedright}
    \def\sht@subsection@fmt{\sffamily\zihao{5}\linespread{1.0}\raggedright}
    \setlength{\sht@section@indent}{0pt}
  \else
    \def\sht@chapter@fmt{\bfseries\sffamily\zihao{3}\linespread{1.0}\centering}
    \def\sht@section@fmt{\sffamily\zihao{4}\linespread{1.0}\raggedright}
    \def\sht@subsection@fmt{\rmfamily\zihao{-4}\linespread{1.0}\raggedright}
    \setlength{\sht@section@indent}{2\ccwd}
  \fi
  \ctexset{
    chapter = {
      format = \sht@chapter@fmt,
      number = \chinese{chapter},
      numberformat = {},
    },
    section = {
      format = \sht@section@fmt,
      numberformat = {},
      indent = \sht@section@indent,
      beforeskip = {18pt},
    },
    subsection = {
      format = \sht@subsection@fmt,
      numberformat = {},
      indent = \sht@section@indent,
    }
  }
\fi
%</cls>
%    \end{macrocode}
%
% \subsection{å…¶ä»–æ­£æ–‡ç¯å¢ƒ}
% æ‰€æœ‰åˆ—è¡¨ç¯å¢ƒæ ‡ç­¾ç¼©è¿› 2 ä¸ªæ±‰å­—å­—å®½ï¼Œ|description| ç¯å¢ƒæ ‡ç­¾åæ·»åŠ ä¸­æ–‡å†’å·ã€‚
%    \begin{macrocode}
%<*cls>
\setlist{
  nosep,
  labelindent = 2\ccwd,
  labelwidth = *,
  labelsep = 0.5\ccwd,
  leftmargin = 0em,
  itemindent = *,
  listparindent = 2\ccwd,
}
\newcommand{\textbf@with@colon}[1]{\textbf{#1ï¼š}}
\setlist[description]{
  labelsep = 0em,
  format = \normalfont\textbf@with@colon,
}
%</cls>
%    \end{macrocode}
%
% å¼•ç”¨ç¯å¢ƒä¸ºä¸­æ–‡æ¥·ä½“+è‹±æ–‡æ„å¤§åˆ©ä½“ï¼Œæ®µé¦–ç¼©è¿› 2 ä¸­æ–‡å­—å®½ï¼Œå·¦å³è¾¹è·å„å¢åŠ  2 ä¸­æ–‡å­—å®½ã€‚
%    \begin{macrocode}
%<*cls>
\ExplSyntaxOn
\ctex_patch_cmd:Nnn \quotation { 1.5em } { 2 \ccwd }
\ExplSyntaxOff
\BeforeBeginEnvironment{quotation}{%
  \begingroup%
  \setlength\leftmargini{2\ccwd}%
}
\AtBeginEnvironment{quotation}{%
  \itshape%
}
\AfterEndEnvironment{quotation}{%
  \endgroup%
}
%</cls>
%    \end{macrocode}
%
% \subsection{å°é¢åŠå£°æ˜é¡µç”Ÿæˆ}
% ä¸ºäº†è§†è§‰é‡å¿ƒçš„ç¨³å®šï¼Œå°é¢æ¡ç›®çš„ä¸‹åˆ’çº¿ä¼šè¾ƒå¼•å·ç¨å¾®å³ç§» $0.5$ ä¸ªæ±‰å­—å­—å®½ï¼Œä¸‹åˆ’çº¿ä¸Šçš„å†…å®¹ä¼šå·¦ç§» $2.5$ ä¸ªæ±‰å­—å­—å®½ã€‚ä¸ºäº†æ–¹ä¾¿åœ°å®šä¹‰å¸¦å¤šä¸ªé»˜è®¤å¯é€‰å‚æ•°çš„ \LaTeX2e å‘½ä»¤ï¼Œè¿™é‡Œç›´æ¥ç”¨äº† |expl3| æä¾›çš„ |\ProvideDocumentCommand| ï¼ˆé”™è¯¯ç”¨æ³•ç¤ºä¾‹ï¼Œéœ€è¦é‡æ„ï¼‰ã€‚ 
%    \begin{macrocode}
%<*cls>
\ExplSyntaxOn
\def\ubox@right@shift{0.5\ccwd}
\def\content@left@shift{2.75\ccwd}
\def\content@left@shift@en{2.5\ccwd}
\def\cover@tab@uline@thick{1.2pt}
\def\cover@tab@entry@width{350pt}
\def\cover@tab@last@entry@width{\cover@tab@entry@width - 2\ccwd - 0.5\ccwd}
\def\cover@tab@entry@width@undergraduate{300pt}
\def\cover@tab@uline@thick@undergraduate{1pt}
%</cls>
%    \end{macrocode}
%
% \begin{macro}{\shifted@uline}
% åœ¨ä¸‹åˆ’çº¿å¼€å§‹å‰æ’å…¥ |hspace| ä»¥å®ç°ä¸‹åˆ’çº¿å³ç§»ã€‚
%    \begin{macrocode}
%<*cls>
\ProvideDocumentCommand{\shifted@uline}{%
    O{\cover@tab@uline@thick} %
    O{\ubox@right@shift} %
    m}{%
  \def\ULthickness{#1}%
  \setlength{\ULdepth}{0.3em}%
  \hspace*{#2}%
  \uline{#3}%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\shifted@box}
% åœ¨ box å‰æ’å…¥ä¸€ä¸ªè´Ÿçš„ |hspace| ä»¥å®ç°å†…å®¹å·¦ç§»ã€‚
%    \begin{macrocode}
%<*cls>
\ProvideDocumentCommand{\shifted@box}{%
    O{\cover@tab@entry@width} %
    O{\content@left@shift} %
    m}{%
  \makebox[#1][c]{\hspace*{-#2} #3 }%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\sht@lines@to@tab}
% å°†åŒ…å«æ¢è¡Œç¬¦çš„å†…å®¹è½¬æ¢ä¸º |tabular| ç¯å¢ƒå†…çš„å¤šè¡Œã€‚
%    \begin{macrocode}
%<*cls>
\ProvideDocumentCommand{\sht@lines@to@tab}{%
    O{\cover@tab@uline@thick} %
    O{\cover@tab@entry@width} %
    O{\content@left@shift} %
    m}{%
  \seq_set_split:NnV \l_tmpa_seq {\\} {#4}
  \clist_set_from_seq:NN \l_tmpa_clist \l_tmpa_seq
  \clist_clear:N \l_tmpb_clist
  \clist_map_inline:Nn \l_tmpa_clist
    {%
      \clist_put_right:Nn \l_tmpb_clist 
        { \shifted@uline[#1]{\shifted@box[#2][#3]{##1}} }
    }
  \clist_use:Nn \l_tmpb_clist { \\ & }
}
\ExplSyntaxOff
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\sht@schoollogo}
% ç”¨äºåœ¨ç ”ç©¶ç”Ÿè®ºæ–‡å°é¢ç»˜åˆ¶æ ¡å¾½ï¼Œæ ¡å¾½ç¼ºå¤±æ—¶æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯ã€‚
%    \begin{macrocode}
%<*cls>
\newcommand\sht@schoollogo{%
  \IfFileExists{shanghaitech-emblem.pdf}{%
    \includegraphics[width=10.48cm]{shanghaitech-emblem.pdf}%
  }{%
    \begin{center}%
      \fbox{%
        \begin{minipage}[t][2.79cm][c]{10.48cm}%
          \centering\bfseries\color{ShtRed} \school@logo@missing%
        \end{minipage}%
      }%
    \end{center}%
  }%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\sht@schoollogo@undergraduate}
% ç”¨äºåœ¨æœ¬ç§‘ç”Ÿè®ºæ–‡å°é¢ç»˜åˆ¶æ ¡å¾½ï¼Œæ ¡å¾½ç¼ºå¤±æ—¶æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯ã€‚
%    \begin{macrocode}
%<*cls>
\newcommand\sht@schoollogo@undergraduate{%
  \noindent%
  \IfFileExists{shanghaitech-emblem.pdf}{%
    \includegraphics[width=5.39cm]{shanghaitech-emblem.pdf}%
  }{%
    \fbox{%
      \begin{minipage}[t][1.45cm][c]{0.75\columnwidth}%
        \bfseries\color{ShtRed} \school@logo@missing%
      \end{minipage}%
    }%
  }%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\maketitle}
% æ ¹æ®å­¦ä½ç±»å‹åŠæ˜¯å¦åŒ¿åï¼Œä¾æ¬¡ç”Ÿæˆä¸­è‹±æ–‡å°é¢å’Œå£°æ˜é¡µã€‚
%    \begin{macrocode}
%<*cls>
\renewcommand{\maketitle}{%
  \ifsht@undergraduate
    \sht@maketitle@undergraduate
    \sht@maketitle@undergraduate@en
  \else
    \ifthenelse{\equal{\sht@degree}{doctor}}{
      \sht@maketitle@graduate{åšå£«}
      \sht@maketitle@graduate@en{dissertation}
    }{
      \ifthenelse{\equal{\sht@degree}{master}}{
        \sht@maketitle@graduate{ç¡•å£«}
        \sht@maketitle@graduate@en{thesis}
      }{
        \sht@error{Degree type `\sht@degree' is not supported yet}
      }
    }
  \fi
  \ifthenelse{\not \boolean{sht@anonymous}}{%
    \ifsht@undergraduate%
      \makedeclarations@undergraduate%
    \else%
      \makedeclarations%
    \fi
  }{}
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \subsubsection{ç ”ç©¶ç”Ÿä¸­æ–‡å°é¢}
%    \begin{macrocode}
%<*cls>
\newcommand{\sht@maketitle@graduate}[1]{%
  \intobmk*{\cleardoublepage}{å°é¢}
  \thispagestyle{empty}
  \begin{center}
    \linespread{1.6}\zihao{4}\bfseries
    \hfill{}
    \ifdefempty{\sht@secret@level}{}{%
      å¯†çº§ï¼š%
      \shifted@uline[1pt][0pt]{%
        \shifted@box[50pt][0pt]{%
          \zihao{5} \sht@secret@level%
        }%
      }%
    }

    \vspace*{\stretch{4}}

    \sht@schoollogo

    \vspace*{\stretch{2}}

    {\zihao{1}\heiti #1å­¦ä½è®ºæ–‡}

    \vspace*{\stretch{3}}

    {\zihao{-3}\heiti \shifted@uline[1.5pt][0pt]{\sht@title}}

    \vspace*{\stretch{3}}

    {
      \songti
      \def\tabcolsep{1pt}
      \def\arraystretch{1.3}
      \begin{tabular}{llc}
        ä½œè€…å§“åï¼š&
          \multicolumn{2}{c}{\shifted@uline{\shifted@box{%
            \ifsht@anonymous%
              \sht@anonymous@str%
            \else%
              \sht@author%
            \fi%
          }}} \\
        æŒ‡å¯¼æ•™å¸ˆï¼š&
          \multicolumn{2}{c}{\shifted@uline{\shifted@box{%
            \ifsht@anonymous%
              \sht@anonymous@str%
            \else%
              \sht@supervisor%
            \fi%
          }}} \\
        \ifdefempty{\sht@supervisor@institution}{}{ &
          \multicolumn{2}{c}{\shifted@uline{%
            \shifted@box{\sht@supervisor@institution}}} \\
        }
        å­¦ä½ç±»åˆ«ï¼š&
          \multicolumn{2}{c}{\shifted@uline{\shifted@box{\sht@degree@name}}} \\
        ä¸€çº§å­¦ç§‘ï¼š&
          \multicolumn{2}{c}{\shifted@uline{%
            \shifted@box{\sht@discipline@level@i}}} \\
        \multicolumn{2}{l}{å­¦æ ¡/å­¦é™¢åç§°ï¼š} &
          \shifted@uline{\shifted@box[\cover@tab@last@entry@width]{%
            \sht@institution}} \\
      \end{tabular}
    }

    \vspace*{\stretch{4}}

    \sht@date

    \vspace{\stretch{4}}
  \end{center}
  \clearpage
  \thispagestyle{empty}
  \cleardoublepage
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{ç ”ç©¶ç”Ÿè‹±æ–‡å°é¢}
%    \begin{macrocode}
%<*cls>
\newcommand{\sht@maketitle@graduate@en}[1]{
  \intobmk*{\cleardoublepage}{Cover}
  \thispagestyle{empty}
  \begin{center}
    \linespread{1.6}
    \zihao{4}\bfseries

    \vspace*{50pt}

    {\zihao{-3}\bfseries \shifted@uline[1.5pt][0pt]{\sht@title@en}}

    \vspace*{\stretch{3}}

    {
      A~#1~submitted~to\\
      ShanghaiTech~University\\
      in~partial~fulfillment~of~the~requirement\\
      for~the~degree~of\\
      \ifthenelse{\equal{\sht@degree}{doctor}}{
        Doctor~of~Philosophy\\
      }{
        \sht@degree@name@en\\
      }
      in~\sht@discipline@level@i@en

      By

      \ifsht@anonymous%
        \sht@anonymous@str%
      \else%
        \sht@author@en%
      \fi%

      Supervisor:~%
      \ifsht@anonymous%
        \sht@anonymous@str%
      \else%
        \sht@supervisor@en%
      \fi%
    }

    \vspace*{\stretch{3}}

    {\sht@institution@en}

    \vspace*{\stretch{1}}

    {\sht@date@en}

    \vspace{\stretch{3}}
  \end{center}
  \clearpage
  \thispagestyle{empty}
  \cleardoublepage
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{æœ¬ç§‘ç”Ÿä¸­æ–‡å°é¢}
%    \begin{macrocode}
%<*cls>
\newcommand{\sht@maketitle@undergraduate}{%
  \intobmk*{\cleardoublepage}{å°é¢}
  \thispagestyle{empty}
  \sht@schoollogo@undergraduate
  \begin{center}
    \linespread{1.6}

    \vspace*{\stretch{20}}

    {\zihao{2}\bfseries æœ¬ç§‘æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰}

    \vspace*{\stretch{54}}

    {
      \zihao{4}
      \def\tabcolsep{1pt}
      \def\arraystretch{1.3}
      \begin{tabular}{cc}
        é¢˜\hspace{2\ccwd}ç›®ï¼š&
          \sht@lines@to@tab[\cover@tab@uline@thick@undergraduate]%
            [\cover@tab@entry@width@undergraduate]{\sht@title} \\
        å­¦ç”Ÿå§“åï¼š&
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]{%
              \sht@author}} \\
        å­¦\hspace{2\ccwd}å·ï¼š&
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]{%
              \sht@author@id}} \\
        å…¥å­¦å¹´ä»½ï¼š&
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]{%
              \sht@entrance@year}} \\
        æ‰€åœ¨å­¦é™¢ï¼š&
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]{%
              \sht@institution}} \\
        æ”»è¯»ä¸“ä¸šï¼š&
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]{%
              \sht@discipline}} \\
        æŒ‡å¯¼æ•™å¸ˆï¼š&
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]{%
              \sht@supervisor}} \\
      \end{tabular}
    }

    \vspace*{\stretch{70}}

    {
      \zihao{-4}
      ä¸Šæµ·ç§‘æŠ€å¤§å­¦
      \par\sht@date
    }

    \vspace{\stretch{11}}
  \end{center}
  \clearpage
  \thispagestyle{empty}
  \cleardoublepage
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{æœ¬ç§‘ç”Ÿè‹±æ–‡å°é¢}
%    \begin{macrocode}
%<*cls>
\newcommand{\sht@maketitle@undergraduate@en}{%
  \intobmk*{\cleardoublepage}{Cover}
  \thispagestyle{empty}
  \sht@schoollogo@undergraduate
  \begin{center}
    \linespread{1.6}

    \vspace*{\stretch{20}}

    {\zihao{2}\bfseries\sffamily THESIS}

    \vspace*{\stretch{54}}

    {
      \zihao{4}
      \def\tabcolsep{1pt}
      \def\arraystretch{1.3}
      \begin{tabular}{lc}
        Subject: &
          \sht@lines@to@tab[\cover@tab@uline@thick@undergraduate]%
            [\cover@tab@entry@width@undergraduate][\content@left@shift@en]{%
              \sht@title@en} \\
        Student Name: &
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]%
              [\content@left@shift@en]{\sht@author@en}} \\
        Student ID: &
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]%
              [\content@left@shift@en]{\sht@author@id}} \\
        Year of Entrance: &
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]%
              [\content@left@shift@en]{\sht@entrance@year}} \\
        School: &
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]%
              [\content@left@shift@en]{\sht@institution@en}} \\
        Major: &
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]%
              [\content@left@shift@en]{\sht@discipline@en}} \\
        Advisor: &
          \shifted@uline[\cover@tab@uline@thick@undergraduate]%
            {\shifted@box[\cover@tab@entry@width@undergraduate]%
              [\content@left@shift@en]{\sht@supervisor@en}} \\
      \end{tabular}
    }

    \vspace*{\stretch{70}}

    {
      \zihao{-4}
      ShanghaiTech University
      \par Date:~\sht@date@en
    }

    \vspace{\stretch{11}}
  \end{center}
  \clearpage
  \thispagestyle{empty}
  \cleardoublepage
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{ç ”ç©¶ç”Ÿå£°æ˜é¡µ}
%    \begin{macrocode}
%<*cls>
\newcommand{\makedeclarations}{%
  \intobmk*{\cleardoublepage}{å£°æ˜}
  \thispagestyle{empty}
  {
    \linespread{1.6}\zihao{-4}

    \vspace*{2ex}

    \begin{center}
      \zihao{4}\bfseries\sffamily ä¸Šæµ·ç§‘æŠ€å¤§å­¦\\ç ”ç©¶ç”Ÿå­¦ä½è®ºæ–‡åŸåˆ›æ€§å£°æ˜
    \end{center}

    æœ¬äººéƒ‘é‡å£°æ˜:æ‰€å‘ˆäº¤çš„å­¦ä½è®ºæ–‡æ˜¯æœ¬äººåœ¨å¯¼å¸ˆçš„æŒ‡å¯¼ä¸‹ç‹¬ç«‹è¿›è¡Œç ”ç©¶å·¥ä½œæ‰€å–å¾—çš„æˆæœã€‚%
    å°½æˆ‘æ‰€çŸ¥ï¼Œé™¤æ–‡ä¸­å·²ç»æ³¨æ˜å¼•ç”¨çš„å†…å®¹å¤–ï¼Œæœ¬è®ºæ–‡ä¸åŒ…å«ä»»ä½•å…¶ä»–ä¸ªäººæˆ–é›†ä½“å·²ç»å‘è¡¨æˆ–æ’°å†™%
    è¿‡çš„ç ”ç©¶æˆæœã€‚å¯¹è®ºæ–‡æ‰€æ¶‰åŠçš„ç ”ç©¶å·¥ä½œåšå‡ºè´¡çŒ®çš„å…¶ä»–ä¸ªäººå’Œé›†ä½“ï¼Œå‡å·²åœ¨æ–‡ä¸­ä»¥æ˜ç¡®æ–¹å¼%
    æ ‡æ˜æˆ–è‡´è°¢ã€‚

    \vspace*{3ex}

    {\hfill{}ä½œè€…ç­¾åï¼š\hspace*{14em}}

    {\hfill{}æ—¥\hspace*{2\ccwd}æœŸï¼š\hspace*{14em}}

    \vspace*{6ex}

    \begin{center}
      \zihao{4}\bfseries\sffamily ä¸Šæµ·ç§‘æŠ€å¤§å­¦\\å­¦ä½è®ºæ–‡æˆæƒä½¿ç”¨å£°æ˜
    \end{center}

    æœ¬äººå®Œå…¨äº†è§£å¹¶åŒæ„éµå®ˆä¸Šæµ·ç§‘æŠ€å¤§å­¦æœ‰å…³ä¿å­˜å’Œä½¿ç”¨å­¦ä½è®ºæ–‡çš„è§„å®šï¼Œå³ä¸Šæµ·ç§‘æŠ€å¤§å­¦æœ‰æƒ%
    ä¿ç•™é€äº¤å­¦ä½è®ºæ–‡çš„å‰¯æœ¬ï¼Œå…è®¸è¯¥è®ºæ–‡è¢«æŸ¥é˜…ï¼Œå¯ä»¥æŒ‰ç…§å­¦æœ¯ç ”ç©¶å…¬å¼€åŸåˆ™å’Œä¿æŠ¤çŸ¥è¯†äº§æƒ%
    çš„åŸåˆ™å…¬å¸ƒè¯¥è®ºæ–‡çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ï¼Œå¯ä»¥é‡‡ç”¨å½±å°ã€ç¼©å°æˆ–å…¶ä»–å¤åˆ¶æ‰‹æ®µä¿å­˜ã€æ±‡ç¼–æœ¬%
    å­¦ä½è®ºæ–‡ã€‚
    
    æ¶‰å¯†åŠå»¶è¿Ÿå…¬å¼€çš„å­¦ä½è®ºæ–‡åœ¨è§£å¯†æˆ–å»¶è¿ŸæœŸåé€‚ç”¨æœ¬å£°æ˜ã€‚

    \vspace*{3ex}

    {\hfill{}ä½œè€…ç­¾åï¼š\hspace*{10em}å¯¼å¸ˆç­¾åï¼š\hspace*{9em}}

    \hfill{}æ—¥\hspace*{2\ccwd}æœŸï¼š%
    \hspace*{10em}æ—¥\hspace*{2\ccwd}æœŸï¼š\hspace*{9em}%

    \vspace{3ex}
  }
  \clearpage
  \thispagestyle{empty}
  \cleardoublepage
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{æœ¬ç§‘ç”Ÿå£°æ˜é¡µ}
%    \begin{macrocode}
%<*cls>
\newcommand{\makedeclarations@undergraduate}{%
  \intobmk*{\cleardoublepage}{å£°æ˜}
  \thispagestyle{empty}
  {
    \linespread{1.6}\zihao{4}

    \vspace*{\stretch{1}}

    \begin{center}
      \zihao{-2}\bfseries\sffamily ä¸Šæµ·ç§‘æŠ€å¤§å­¦\\æ¯•ä¸šè®ºæ–‡(è®¾è®¡)å­¦æœ¯è¯šä¿¡å£°æ˜
    \end{center}

    \vspace*{\stretch{1}}

    æœ¬äººéƒ‘é‡å£°æ˜ï¼šæ‰€å‘ˆäº¤çš„æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ï¼Œæ˜¯æœ¬äººåœ¨å¯¼å¸ˆçš„æŒ‡å¯¼ä¸‹ï¼Œç‹¬ç«‹è¿›è¡Œç ”ç©¶å·¥ä½œ%
    æ‰€å–å¾—çš„æˆæœã€‚é™¤æ–‡ä¸­å·²ç»æ³¨æ˜å¼•ç”¨çš„å†…å®¹å¤–ï¼Œæœ¬è®ºæ–‡ä¸åŒ…å«ä»»ä½•å…¶ä»–ä¸ªäººæˆ–é›†ä½“å·²ç»å‘è¡¨%
    æˆ–æ’°å†™è¿‡çš„ä½œå“æˆæœã€‚å¯¹æœ¬æ–‡çš„ç ”ç©¶åšå‡ºé‡è¦è´¡çŒ®çš„ä¸ªäººå’Œé›†ä½“ï¼Œå‡å·²åœ¨æ–‡ä¸­ä»¥æ˜ç¡®æ–¹å¼%
    æ ‡æ˜ã€‚æœ¬äººå®Œå…¨æ„è¯†åˆ°æœ¬å£°æ˜çš„æ³•å¾‹ç»“æœç”±æœ¬äººæ‰¿æ‹…ã€‚

    \vspace*{\stretch{3}}

    \hfill{}ä½œè€…ç­¾åï¼š\hspace*{9.5\ccwd}

    \vspace*{\stretch{1}}

    \hfill{}æ—¥\hspace*{2\ccwd}æœŸï¼š%
    \hspace*{2.5\ccwd}å¹´%
    \hspace*{1.5\ccwd}æœˆ%
    \hspace*{1.5\ccwd}æ—¥%
    \hspace*{1\ccwd}

    \vspace{\stretch{6}}
  }
  \clearpage
  \thispagestyle{empty}
  \cleardoublepage
  \thispagestyle{empty}
  {
    \linespread{1.6}\zihao{4}

    \vspace*{\stretch{1}}

    \begin{center}
      \zihao{-2}\bfseries\sffamily ä¸Šæµ·ç§‘æŠ€å¤§å­¦\\æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ç‰ˆæƒä½¿ç”¨æˆæƒä¹¦
    \end{center}

    \vspace*{\stretch{1}}

    æœ¬æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ä½œè€…åŒæ„å­¦æ ¡ä¿ç•™å¹¶å‘å›½å®¶æœ‰å…³éƒ¨é—¨æˆ–æœºæ„é€äº¤è®ºæ–‡çš„å¤å°ä»¶å’Œç”µå­ç‰ˆï¼Œ%
    å…è®¸è®ºæ–‡è¢«æŸ¥é˜…å’Œå€Ÿé˜…ã€‚æœ¬äººæˆæƒä¸Šæµ·ç§‘æŠ€å¤§å­¦å¯ä»¥å°†æœ¬æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹%
    ç¼–å…¥æœ‰å…³æ•°æ®åº“è¿›è¡Œæ£€ç´¢ï¼Œå¯ä»¥é‡‡ç”¨å½±å°ã€ç¼©å°æˆ–æ‰«æç­‰å¤åˆ¶æ‰‹æ®µä¿å­˜å’Œæ±‡ç¼–æœ¬%
    æ¯•ä¸šè®ºæ–‡ï¼ˆè®¾è®¡ï¼‰ã€‚

    \hspace*{6\ccwd}\textbf{ä¿\hspace*{1\ccwd}å¯†}$\square$ï¼Œ%
    åœ¨\uline{\hspace*{2\ccwd}}å¹´è§£å¯†åé€‚ç”¨æœ¬æˆæƒä¹¦ã€‚

    æœ¬è®ºæ–‡å±äº

    \hspace*{6\ccwd}\textbf{ä¸ä¿å¯†}$\square$ã€‚

    ï¼ˆè¯·åœ¨ä»¥ä¸Šæ–¹æ¡†å†…æ‰“â€œ\checkmarkâ€ï¼‰

    \vspace*{\stretch{3}}

    \noindent ä½œè€…ç­¾åï¼š\hspace{12.5\ccwd}æŒ‡å¯¼æ•™å¸ˆç­¾åï¼š

    \vspace*{\stretch{1}}

    \noindent æ—¥æœŸï¼š%
    \hspace*{2.5\ccwd}å¹´%
    \hspace*{1.5\ccwd}æœˆ%
    \hspace*{1.5\ccwd}æ—¥%
    \hspace*{6\ccwd}æ—¥æœŸï¼š%
    \hspace*{2.5\ccwd}å¹´%
    \hspace*{1.5\ccwd}æœˆ%
    \hspace*{1.5\ccwd}æ—¥

    \vspace{\stretch{4}}
  }
  \clearpage
  \thispagestyle{empty}
  \cleardoublepage
}
%</cls>
%    \end{macrocode}
%
% \subsection{å‰è¨€ç¯å¢ƒ}
% å‰è¨€ä¸­çš„ä¸­è‹±æ–‡æ‘˜è¦ã€ç¬¦å·åˆ—è¡¨éœ€è¦åœ¨ç›¸åº”ç¯å¢ƒå†…å½•å…¥ã€‚
%
% \subsubsection{ä¸­æ–‡æ‘˜è¦ç¯å¢ƒ}
%    \begin{macrocode}
%<*cls>
\newenvironment{abstract}[1][\sht@null@arg]{%
  \cleardoublepage%
  \ifthenelse{\equal{#1}{flattitle}}{%
    \def\sht@abs@title{\sht@flat@title}%
  }{%
    \def\sht@abs@title{\sht@title}%
  }%
  \ifsht@undergraduate
    \let\clearpage\relax%
    \vspace*{\baselineskip}%
    \begin{center}%
      \zihao{3}\bfseries\sffamily\sht@abs@title%
    \end{center}%
    \vspace*{\baselineskip}%
    \ctexset{chapter/format += \zihao{4}, chapter/beforeskip = 0pt}%
  \fi
  \intobmk\chapter*{æ‘˜\hspace{1\ccwd}è¦}%
}{%
  \vspace{\baselineskip}%
  \ifsht@undergraduate%
    \ifsht@comfort%
      \par\noindent{\bfseries\sffamily å…³é”®è¯ï¼š} \sht@keywords%
    \else%
      \par\noindent{\zihao{-4}\bfseries\sffamily å…³é”®è¯ï¼š} \sht@keywords%
    \fi%
  \else%
    \par\noindent{\bfseries å…³é”®è¯ï¼š} \sht@keywords%
  \fi%
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{è‹±æ–‡æ‘˜è¦ç¯å¢ƒ}
%    \begin{macrocode}
%<*cls>
\newenvironment{abstract*}[1][\sht@null@arg]{%
  \cleardoublepage%
  \ifthenelse{\equal{#1}{flattitle}}{%
    \def\sht@abs@title@en{\sht@flat@title@en}%
  }{%
    \def\sht@abs@title@en{\sht@title@en}%
  }%
  \ifsht@undergraduate
    \let\clearpage\relax%
    \vspace*{\baselineskip}%
    \begin{center}%
      \zihao{3}\bfseries\sht@abs@title@en%
    \end{center}%
    \vspace*{\baselineskip}%
    \ctexset{chapter/format += \zihao{4}\rmfamily, chapter/beforeskip = 0pt}%
  \fi
  \intobmk\chapter*{Abstract}%
}{%
  \vspace{\baselineskip}%
  \ifsht@undergraduate%
    \ifsht@comfort%
      \par\noindent{\bfseries Key words:} \sht@keywords@en%
    \else%
      \par\noindent{\zihao{-4}\bfseries Key words:} \sht@keywords@en%
    \fi%
  \else%
    \par\noindent{\bfseries Key Words:} \sht@keywords@en%
  \fi%
}
%</cls>
%    \end{macrocode}
%
% \subsubsection{ç¬¦å·åˆ—è¡¨ç¯å¢ƒ}
%    \begin{macrocode}
%<*cls>
\newcounter{sht@nomenclature@cnt}
\setcounter{sht@nomenclature@cnt}{0}
\def\sht@null@arg{}
\newenvironment{nomenclatures}[1][\sht@null@arg]{%
  \ifnum\thesht@nomenclature@cnt=0
    \cleardoublepage
    \intobmk\chapter*{ç¬¦å·åˆ—è¡¨}%
  \fi
  \stepcounter{sht@nomenclature@cnt}
  \ifthenelse{\not \equal{#1}{\sht@null@arg}}{%
    \ifsht@undergraduate%
      \ctexset{section/format += \zihao{-4}, section/indent = 0pt}%
    \fi%
    \section*{#1}%
  }{
    \ifsht@undergraduate%
      \par\vspace{18pt}%
    \else%
      \par\vspace{24pt}%
    \fi%
  }
  \renewcommand{\item}[3][\sht@null@arg]{
    \ifthenelse{\not \equal{##1}{\sht@null@arg}}{
      \par\noindent\makebox[0.15\columnwidth][l]{##2}{{##3}\hfill{##1}}
    }{
      \par\noindent\makebox[0.15\columnwidth][l]{##2}{##3}
    }
  }
  \providecommand{\header}[3][\sht@null@arg]{
    \item[\textbf{##1}]{\textbf{##2}}{\textbf{##3}}
  }
}{
}
%</cls>
%    \end{macrocode}
%
% \subsection{é™„å½•åŠåè®°ç¯å¢ƒ}
% \begin{macro}{\makebiblio}
% è°ƒæ•´å­—å·ã€è¡Œè·å¹¶æŒ‰ç…§è§„èŒƒè¾“å‡ºå‚è€ƒæ–‡çŒ®åˆ—è¡¨ã€‚
%    \begin{macrocode}
%<*cls>
\providecommand{\makebiblio}{%
  \renewcommand{\bibfont}{\zihao{5}}%
  \intotoc*{\cleardoublepage}{\bibname}%
  \urlstyle{same}%
  \printbibliography%
  \urlstyle{tt}%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\appendix}
% é™¤åˆ‡æ¢è‡³é™„å½•æ¨¡å¼å¤–ï¼Œè°ƒæ•´ç›®å½•æ·±åº¦ï¼Œå¹¶æ ¹æ®å­¦ä½ç±»å‹è®¾ç½®é¡µçœ‰é¡µè„šã€‚
%    \begin{macrocode}
%<*cls>
\LetLtxMacro{\origin@appendix}{\appendix}
\renewcommand{\appendix}{%
  \origin@appendix%
  \intotoc*{\cleardoublepage}{\appendixname}%
  \settocdepth{part}%
  \ifsht@undergraduate%
    \pagestyle{MNNumberedWithLogo}%
  \else%
    \pagestyle{LRNumberedAppendix}%
  \fi%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\backmatter}
% åŒæ ·åœ°ï¼Œæ¢è‡³åè®°æ¨¡å¼ï¼Œå¹¶æ ¹æ®å­¦ä½ç±»å‹è®¾ç½®é¡µçœ‰é¡µè„šã€‚
%    \begin{macrocode}
%<*cls>
\providecommand{\backmatter}{}
\LetLtxMacro{\origin@backmatter}{\backmatter}
\renewcommand{\backmatter}{%
  \origin@backmatter%
  \settocdepth{chapter}%
  \ifsht@undergraduate%
    \pagestyle{MNNumberedWithLogo}%
  \else%
    \pagestyle{LRNumbered}%
  \fi%
  \ifsht@undergraduate%
    \ctexset{section/format += \zihao{-4}, section/indent = 0pt}%
  \fi%
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{macro}{\sht@check@resume@title}
% åœ¨æ’°å†™ä¸ªäººç®€å†æ—¶ï¼Œç¬¬ä¸€ä¸ªè¢«è°ƒç”¨çš„ç¯å¢ƒä¼šä¸ºç®€å†æ·»åŠ ç« èŠ‚æ ‡é¢˜ã€‚
%    \begin{macrocode}
%<*cls>
\newcounter{sht@resume@cnt}
\setcounter{sht@resume@cnt}{0}
\newcommand{\sht@check@resume@title}{
  \ifnum\thesht@resume@cnt=0
    \cleardoublepage
    \chapter{ä½œè€…ç®€å†åŠæ”»è¯»å­¦ä½æœŸé—´å‘è¡¨çš„å­¦æœ¯è®ºæ–‡ä¸ç ”ç©¶æˆæœ}
  \fi
  \stepcounter{sht@resume@cnt}
}
%</cls>
%    \end{macrocode}
% \end{macro}
%
% \begin{environment}{resume}
% ä½œè€…ä¸ªäººç®€å†ï¼Œå†…å®¹ä»…åœ¨éåŒ¿åç¯å¢ƒæ˜¾ç¤ºã€‚
%    \begin{macrocode}
%<*cls>
\newenvironment{resume}{%
  \sht@check@resume@title
  \section*{ä½œè€…ç®€å†ï¼š}
  \ifsht@anonymous
    \sht@anonymous@str\par
    \comment
  \fi
}{%
  \ifsht@anonymous
    \endcomment
  \fi
}
%</cls>
%    \end{macrocode}
% \end{environment}
%
% \begin{environment}{publications}
% \begin{environment}{publications*}
% å·²å‘è¡¨ï¼ˆæˆ–æ­£å¼æ¥å—ï¼‰çš„å­¦æœ¯è®ºæ–‡ï¼Œåˆ†åˆ«åœ¨éåŒ¿åç¯å¢ƒï¼ˆpublicationsï¼‰å’ŒåŒ¿åç¯å¢ƒï¼ˆpublications*ï¼‰ä¸‹æ˜¾ç¤ºã€‚
%    \begin{macrocode}
%<*cls>
\newenvironment{publications}{%
  \sht@check@resume@title
  \ifsht@anonymous
    \comment
  \fi
  \section*{å·²å‘è¡¨ï¼ˆæˆ–æ­£å¼æ¥å—ï¼‰çš„å­¦æœ¯è®ºæ–‡ï¼š}
}{%
  \ifsht@anonymous
    \endcomment
  \fi
}
\newenvironment{publications*}{%
  \sht@check@resume@title
  \ifthenelse{\not \boolean{sht@anonymous}}{
    \comment
  }{}
  \section*{å·²å‘è¡¨ï¼ˆæˆ–æ­£å¼æ¥å—ï¼‰çš„å­¦æœ¯è®ºæ–‡ï¼š}
}{%
  \ifthenelse{\not \boolean{sht@anonymous}}{
    \endcomment
  }{}
}
%</cls>
%    \end{macrocode}
% \end{environment}
% \end{environment}
%
% \begin{environment}{patents}
% \begin{environment}{patents*}
% ç”³è¯·æˆ–å·²è·å¾—çš„ä¸“åˆ©ï¼Œåˆ†åˆ«åœ¨éåŒ¿åç¯å¢ƒï¼ˆpatentsï¼‰å’ŒåŒ¿åç¯å¢ƒï¼ˆpatents*ï¼‰ä¸‹æ˜¾ç¤ºã€‚
%    \begin{macrocode}
%<*cls>
\newenvironment{patents}{%
  \sht@check@resume@title
  \ifsht@anonymous
    \comment
  \fi
  \section*{ç”³è¯·æˆ–å·²è·å¾—çš„ä¸“åˆ©ï¼š}
}{%
  \ifsht@anonymous
    \endcomment
  \fi
}
\newenvironment{patents*}{%
  \sht@check@resume@title
  \ifthenelse{\not \boolean{sht@anonymous}}{
    \comment
  }{}
  \section*{ç”³è¯·æˆ–å·²è·å¾—çš„ä¸“åˆ©ï¼š}
}{%
  \ifthenelse{\not \boolean{sht@anonymous}}{
    \endcomment
  }{}
}
%</cls>
%    \end{macrocode}
% \end{environment}
% \end{environment}
%
% \begin{environment}{projects}
% å‚åŠ çš„ç ”ç©¶é¡¹ç›®åŠè·å¥–æƒ…å†µï¼Œä»…åœ¨éåŒ¿åç¯å¢ƒä¸‹æ˜¾ç¤ºã€‚
%    \begin{macrocode}
%<*cls>
\newenvironment{projects}{%
  \sht@check@resume@title
  \section*{å‚åŠ çš„ç ”ç©¶é¡¹ç›®åŠè·å¥–æƒ…å†µï¼š}
  \ifsht@anonymous
    \sht@anonymous@str\par
    \comment
  \fi
}{%
  \ifsht@anonymous
    \endcomment
  \fi
}
%</cls>
%    \end{macrocode}
% \end{environment}
%
% \begin{environment}{acknowledgement}
% è‡´è°¢ï¼Œä»…åœ¨éåŒ¿åç¯å¢ƒä¸‹æ˜¾ç¤ºã€‚
%    \begin{macrocode}
%<*cls>
\newenvironment{acknowledgement}{%
  \ifsht@anonymous
    \comment
  \else
    \cleardoublepage
    \chapter[è‡´è°¢]{è‡´\hspace{1\ccwd}è°¢}\chaptermark{è‡´\hspace{1\ccwd}è°¢}%
  \fi
}{%
  \ifsht@anonymous
    \endcomment
  \fi
}
%</cls>
%    \end{macrocode}
% \end{environment}
%
% \subsection{æ–‡æ¡£ç±»åå¤„ç†}
% åœ¨æ’ç‰ˆç ”ç©¶ç”Ÿè®ºæ–‡æˆ–æœ¬ç§‘ç”Ÿè®ºæ–‡çš„æ‰“å°ç‰ˆæ—¶ï¼Œç¡®ä¿è®ºæ–‡åœ¨å¶æ•°é¡µç»“æŸã€‚
%    \begin{macrocode}
%<*cls>
\AtEndDocument{
  \cleardoublepage
}
%</cls>
%    \end{macrocode}
%
% \section{æ–‡æ¡£æ ¼å¼å®åŒ… \shtthesisdoc{} å®ç°}
%    \begin{macrocode}
%<*doc>
\newcommand\shtthesisdoc{\textup{\sffamily shtthesis-doc}}
\ProvidesPackage{shtthesis-doc}
\RequirePackage[heading=true, fontset=none]{ctex}
\RequirePackage{geometry}
\RequirePackage{xcolor}
\RequirePackage{subcaption}
\RequirePackage{ctable}
\RequirePackage{listings}
\RequirePackage{hologo}
\RequirePackage[normalem]{ulem}
\RequirePackage{mathtools}
\RequirePackage[math-style=literal]{unicode-math}
\RequirePackage[hyperref=manual, style=gb7714-2015]{biblatex}
\RequirePackage{hyperref}
\geometry{
  a4paper,
  includeheadfoot,
  top    = 1.5cm,
  bottom = 1.5cm,
  inner  = 3.17cm,
  outer  = 3.17cm,
}
\raggedbottom
\setmainfont{texgyrepagella}[
  Extension      = .otf,
  UprightFont    = *-regular,
  BoldFont       = *-bold,
  ItalicFont     = *-italic,
  BoldItalicFont = *-bolditalic,
  Ligatures      = TeX,
]
\setsansfont{LibertinusSans}[
  Extension      = .otf,
  UprightFont    = *-Regular,
  BoldFont       = *-Bold,
  ItalicFont     = *-Italic,
  Ligatures      = TeX,
]
\setmonofont{Sarasa Mono Slab SC}[
  UprightFont    = * Light,
  BoldFont       = *,
  ItalicFont     = * Light Italic,
  BoldItalicFont = * Italic,
  Ligatures      = CommonOff,
]
\setCJKmainfont{Noto Serif CJK SC}[
  ItalicFont     = FandolKai-Regular,
  ItalicFeatures = {Extension = .otf},
]
\setCJKsansfont{Noto Sans CJK SC}[
  UprightFont = * Regular,
  BoldFont    = * Medium,
]
\setCJKmonofont{Sarasa Mono Slab SC}[
  UprightFont    = * Light,
  BoldFont       = *,
  ItalicFont     = * Light Italic,
  BoldItalicFont = * Italic,
  Ligatures      = CommonOff,
]
\setCJKfamilyfont{zhsong}{Noto Serif CJK SC}
\setCJKfamilyfont{zhhei}{Noto Sans CJK SC}[
  UprightFont = * Regular,
  BoldFont    = * Medium,
]
\setCJKfamilyfont{zhkai}{FandolKai-Regular.otf}
\setCJKfamilyfont{zhfs}{FandolFang-Regular.otf}
\providecommand{\songti}{\CJKfamily{zhsong}}
\providecommand{\heiti}{\CJKfamily{zhhei}}
\providecommand{\kaishu}{\CJKfamily{zhkai}}
\providecommand{\fangsong}{\CJKfamily{zhfs}}
\setmathfont{texgyrepagella-math.otf}
\newtagform{dots}{\ldots\ (}{)}
\definecolor{ShtRed}{RGB}{146,46,23}
\definecolor{fdu@link}{HTML}{990000}
\definecolor{fdu@url}{HTML}{0000B2}
\definecolor{fdu@cite}{HTML}{007F00}
\newcommand\prompt{\textup{\ttfamily \$}}
\lstdefinestyle{lstStyleBase}{%
  basicstyle=\small\ttfamily,
  aboveskip=\medskipamount,
  belowskip=\medskipamount,
  lineskip=0pt,
  boxpos=c,
  showlines=false,
  extendedchars=true,
  upquote=true,
  tabsize=2,
  showtabs=false,
  showspaces=false,
  showstringspaces=false,
  numbers=none,
  linewidth=\linewidth,
  xleftmargin=4pt,
  xrightmargin=0pt,
  resetmargins=false,
  breaklines=true,
  breakatwhitespace=false,
  breakindent=0pt,
  breakautoindent=true,
  columns=flexible,
  keepspaces=true,
  gobble=2,
  framesep=3pt,
  rulesep=1pt,
  framerule=1pt,
  frame=l,
  rulecolor=\color{ShtRed},
  backgroundcolor=\color{gray!5},
  stringstyle=\color{green!40!black!100},
  keywordstyle=\bfseries\color{blue!50!black},
  commentstyle=\slshape\color{black!60},
  escapeinside={`'},
}
\lstdefinestyle{lstStyleShell}{%
  style=lstStyleBase,
  language=bash}
\lstdefinestyle{lstStyleLaTeX}{%
  style=lstStyleBase,
  language=[LaTeX]TeX}
\lstnewenvironment{latex}{\lstset{style=lstStyleLaTeX}}{}
\lstnewenvironment{shell}{\lstset{style=lstStyleShell}}{}
\hypersetup{
  colorlinks = true,
  linkcolor  = fdu@link,
  urlcolor   = fdu@url,
  citecolor  = fdu@cite,
}
\addbibresource{\jobname.bib}
\BiblatexManualHyperrefOn
%</doc>
%    \end{macrocode}
% \clearpage
% \Finale
%
\endinput